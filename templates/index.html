<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalypsoPy+ by Serial Cables - Professional Hardware Interface</title>

    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>

    <!-- CalypsoPy+ Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîå</text></svg>">
</head>
<body>
    <!-- Header Bar -->
    <div class="header-bar">
        <div class="brand-logo">
            <div class="brand-icon">CP</div>
            <div class="brand-text">
                <h1>CalypsoPy+</h1>
                <div class="tagline">by Serial Cables</div>
            </div>
        </div>

        <div class="header-controls">
            <div class="developer-mode-toggle">
                <label style="display: flex; align-items: center; gap: 8px; color: rgba(255, 255, 255, 0.8); font-size: 13px; font-weight: 500; cursor: pointer;">
                    <input type="checkbox" id="developerMode" style="transform: scale(1.2);">
                    <span>üîì Developer Mode</span>
                </label>
            </div>
            <div id="connectionStatus" class="connection-status disconnected">
                <div class="status-dot"></div>
                <span>Disconnected</span>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="nav-section">
                <h3>Connection</h3>
                <div class="nav-item active" data-dashboard="connection">
                    <div class="nav-icon">üîå</div>
                    <div class="nav-text">Device Connection</div>
                </div>
            </div>

            <div class="nav-section">
                <h3>Dashboards</h3>
                <div class="nav-item" data-dashboard="device_info">
                    <div class="nav-icon">üìã</div>
                    <div class="nav-text">Device Info</div>
                </div>
                <div class="nav-item" data-dashboard="link_status">
                    <div class="nav-icon">üì°</div>
                    <div class="nav-text">Link Status</div>
                </div>
                <div class="nav-item" data-dashboard="bifurcation">
                    <div class="nav-icon">üîÄ</div>
                    <div class="nav-text">Bifurcation</div>
                </div>
                <div class="nav-item" data-dashboard="i2c">
                    <div class="nav-icon">üîó</div>
                    <div class="nav-text">I2C/I3C</div>
                </div>
                <div class="nav-item" data-dashboard="advanced">
                    <div class="nav-icon">üî¨</div>
                    <div class="nav-text">Advanced</div>
                </div>
                <div class="nav-item" data-dashboard="resets">
                    <div class="nav-icon">üîÑ</div>
                    <div class="nav-text">Resets</div>
                </div>
                <div class="nav-item" data-dashboard="firmware">
                    <div class="nav-icon">‚¨ÜÔ∏è</div>
                    <div class="nav-text">Firmware Updates</div>
                </div>
            </div>

            <div class="nav-section">
                <h3>System</h3>
                <div class="nav-item" data-dashboard="analytics">
                    <div class="nav-icon">üìä</div>
                    <div class="nav-text">Analytics</div>
                    <div class="nav-badge" id="commandCount">0</div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Connection Dashboard -->
            <div id="connection-dashboard" class="dashboard-content active">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Device Connection</h2>
                    <p class="dashboard-subtitle">Connect to your hardware device to begin diagnostics and control</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîå</div>
                                Serial Port Selection
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Available Ports</label>
                            <select id="portSelect" class="form-control">
                                <option value="">Scanning for devices...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Connection Properties</label>
                            <div style="background: var(--light-gray); padding: 15px; border-radius: 10px; font-size: 14px; color: var(--secondary-gray);">
                                <strong>Baud Rate:</strong> 115,200 bps<br>
                                <strong>Data Bits:</strong> 8<br>
                                <strong>Parity:</strong> None<br>
                                <strong>Stop Bits:</strong> 1<br>
                                <strong>Flow Control:</strong> None<br>
                                <strong>Timeout:</strong> 2.0 seconds
                            </div>
                        </div>

                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <button id="connectBtn" class="btn btn-primary" disabled>
                                <span>üîó</span> Connect Device
                            </button>
                            <button id="disconnectBtn" class="btn btn-secondary" disabled>
                                <span>üîå</span> Disconnect
                            </button>
                            <button id="refreshBtn" class="btn btn-outline">
                                <span>üîÑ</span> Refresh Ports
                            </button>
                            <button id="testApiBtn" class="btn btn-outline" style="background-color: #28a745; color: white;">
                                <span>üß™</span> Test API
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìä</div>
                                Connection Status
                            </div>
                        </div>

                        <div id="connectionDetails">
                            <p style="color: var(--secondary-gray); font-style: italic;">No device connected</p>
                        </div>

                        <div style="margin-top: 20px; padding: 15px; background: var(--light-gray); border-radius: 10px;">
                            <h4 style="color: var(--primary-red); margin-bottom: 10px; font-size: 16px;">üöÄ Getting Started</h4>
                            <ol style="color: var(--secondary-gray); font-size: 14px; line-height: 1.6; margin-left: 20px;">
                                <li>Connect your hardware device via USB/Serial cable</li>
                                <li>Click "Refresh Ports" to scan for new devices</li>
                                <li>Select your device from the dropdown menu</li>
                                <li>Click "Connect Device" to establish connection</li>
                                <li>Once connected, you'll be taken to Device Information</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Device Info Dashboard -->
            <div id="device_info-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">Device Information</h2>
                            <p class="dashboard-subtitle">Hardware identification and system status information</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="exportDeviceInfo">
                                <span>üìÑ</span> Export Report
                            </button>
                        </div>
                    </div>
                </div>

                <!-- System Overview Cards -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="deviceModel">Unknown</div>
                        <div class="metric-label">Device Model</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="firmwareVersion">Unknown</div>
                        <div class="metric-label">Firmware Version</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="serialNumber">Unknown</div>
                        <div class="metric-label">Serial Number</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="boardTemp">--¬∞C</div>
                        <div class="metric-label">Board Temperature</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Hardware Information -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîß</div>
                                Hardware Information
                            </div>
                            <button class="btn btn-sm btn-outline" id="refreshDeviceInfo">
                                <span>üîÑ</span> Refresh
                            </button>
                        </div>

                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">S/N</label>
                                <span class="info-value" id="hwSerialNumber">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Company</label>
                                <span class="info-value" id="hwCompany">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Model</label>
                                <span class="info-value" id="hwModel">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Version</label>
                                <span class="info-value" id="hwVersion">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">SDK Version</label>
                                <span class="info-value" id="sdkVersion">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Thermal Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üå°Ô∏è</div>
                                Thermal Status
                            </div>
                        </div>

                        <div class="thermal-display">
                            <div class="thermal-item">
                                <div class="thermal-label">Board Temperature</div>
                                <div class="thermal-value" id="thermalBoardTemp">--¬∞C</div>
                                <div class="thermal-status" id="thermalBoardStatus">Normal</div>
                            </div>
                            <div class="thermal-item">
                                <div class="thermal-label">Fan Speed</div>
                                <div class="thermal-value" id="fanSpeed">-- RPM</div>
                                <div class="thermal-bar">
                                    <div class="thermal-bar-fill" id="fanSpeedBar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Voltage Sensors -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚ö°</div>
                                Voltage Sensors
                            </div>
                        </div>

                        <div class="voltage-grid" id="voltageGrid">
                            <!-- Voltage items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Current Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîã</div>
                                Current Status
                            </div>
                        </div>

                        <div class="current-display">
                            <div class="current-item">
                                <div class="current-label">Board Current</div>
                                <div class="current-value" id="boardCurrent">-- mA</div>
                            </div>
                        </div>
                    </div>

                    <!-- Port Configuration -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîå</div>
                                Port Configuration
                            </div>
                        </div>

                        <div class="port-grid" id="portGrid">
                            <!-- Port items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Error Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚ö†Ô∏è</div>
                                Error Status
                            </div>
                        </div>

                        <div class="error-grid" id="errorGrid">
                            <!-- Error items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Command Interface -->
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üí¨</div>
                                Device Commands
                            </div>
                            <div class="card-actions">
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--secondary-gray);">
                                    <input type="checkbox" id="useCacheDevice" checked> Use cache
                                </label>
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="deviceCommandInput" class="form-control" placeholder="Enter custom command..." disabled>
                            <button id="sendDeviceCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="devicePresets">
                            <div class="preset-btn" data-cmd="sysinfo" data-desc="System information">
                                <div class="preset-title">System Info</div>
                                <div class="preset-command">sysinfo</div>
                            </div>
                            <div class="preset-btn" data-cmd="version" data-desc="Firmware version">
                                <div class="preset-title">Version Info</div>
                                <div class="preset-command">version</div>
                            </div>
                            <div class="preset-btn" data-cmd="temp" data-desc="Temperature readings">
                                <div class="preset-title">Temperature</div>
                                <div class="preset-command">temp</div>
                            </div>
                            <div class="preset-btn" data-cmd="voltage" data-desc="Voltage readings">
                                <div class="preset-title">Voltage</div>
                                <div class="preset-command">voltage</div>
                            </div>
                            <div class="preset-btn" data-cmd="current" data-desc="Current readings">
                                <div class="preset-title">Current</div>
                                <div class="preset-command">current</div>
                            </div>
                            <div class="preset-btn" data-cmd="status" data-desc="Overall status">
                                <div class="preset-title">Status</div>
                                <div class="preset-command">status</div>
                            </div>
                        </div>

                        <div class="console-container" id="deviceConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">CalypsoPy+ Device Info Dashboard initialized. Connect to a device to view system information.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Link Status Dashboard -->
            <div id="link_status-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Link Status</h2>
                    <p class="dashboard-subtitle">Monitor communication link quality and connection statistics</p>
                </div>

                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="linkState">Unknown</div>
                        <div class="metric-label">Link State</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="signalStrength">-</div>
                        <div class="metric-label">Signal Strength</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="errorCount">0</div>
                        <div class="metric-label">Error Count</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="packetCount">0</div>
                        <div class="metric-label">Packet Count</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üì°</div>
                                Link Status Commands
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="linkCommandInput" class="form-control" placeholder="Enter link status command..." disabled>
                            <button id="sendLinkCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="linkPresets">
                            <div class="preset-btn" data-cmd="AT+CSQ" data-desc="Signal quality">
                                <div class="preset-title">Signal Quality</div>
                                <div class="preset-command">AT+CSQ</div>
                            </div>
                            <div class="preset-btn" data-cmd="AT+COPS?" data-desc="Network status">
                                <div class="preset-title">Network Status</div>
                                <div class="preset-command">AT+COPS?</div>
                            </div>
                            <div class="preset-btn" data-cmd="AT+CREG?" data-desc="Registration status">
                                <div class="preset-title">Registration</div>
                                <div class="preset-command">AT+CREG?</div>
                            </div>
                            <div class="preset-btn" data-cmd="LINK_STATUS" data-desc="Link diagnostics">
                                <div class="preset-title">Link Diag</div>
                                <div class="preset-command">LINK_STATUS</div>
                            </div>
                        </div>

                        <div class="console-container" id="linkConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Link Status monitoring ready. Execute commands to check connection quality.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bifurcation Dashboard -->
            <div id="bifurcation-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">PCIe Bifurcation Configuration</h2>
                            <p class="dashboard-subtitle">Monitor and configure PCIe lane bifurcation modes</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="refreshBifurcation">
                                <span>üîÑ</span> Refresh Mode
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Current Mode Overview -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="currentSBRMode">--</div>
                        <div class="metric-label">Current SBR Mode</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="goldenFingerConfig">--</div>
                        <div class="metric-label">Golden Finger</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="straddlePCIE">--</div>
                        <div class="metric-label">Straddle PCIE</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="mcioStatus">--</div>
                        <div class="metric-label">MCIO Status</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Current Configuration Card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîÄ</div>
                                Current Bifurcation Mode
                            </div>
                        </div>

                        <div id="bifurcationModeDisplay" class="bifurcation-mode-display">
                            <div class="bifurcation-mode-card">
                                <div class="bifurcation-mode-header">
                                    <span class="bifurcation-mode-number">Mode: --</span>
                                    <span class="bifurcation-status-badge active">ACTIVE</span>
                                </div>
                                <div class="bifurcation-mode-details">
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Golden Finger:</span>
                                        <span class="detail-value" id="modeGoldenFinger">--</span>
                                    </div>
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Straddle PCIE:</span>
                                        <span class="detail-value" id="modeStraddlePCIE">--</span>
                                    </div>
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Left MCIO:</span>
                                        <span class="detail-value" id="modeLeftMCIO">--</span>
                                    </div>
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Right MCIO:</span>
                                        <span class="detail-value" id="modeRightMCIO">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Available Modes Table -->
                    <div class="card bifurcation-modes-table">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìã</div>
                                Available Bifurcation Modes
                            </div>
                        </div>

                        <div class="bifurcation-table-container">
                            <table class="bifurcation-table">
                                <thead>
                                    <tr>
                                        <th>SBR Mode</th>
                                        <th>Golden Finger</th>
                                        <th>Straddle PCIE</th>
                                        <th>Left MCIO</th>
                                        <th>Right MCIO</th>
                                    </tr>
                                </thead>
                                <tbody id="bifurcationTableBody">
                                    <tr data-mode="0">
                                        <td><span class="mode-indicator">0</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                    </tr>
                                    <tr data-mode="1">
                                        <td><span class="mode-indicator">1</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X8(CC)</span></td>
                                        <td><span class="lane-config">X8(CC)</span></td>
                                    </tr>
                                    <tr data-mode="2">
                                        <td><span class="mode-indicator">2</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                    </tr>
                                    <tr data-mode="3">
                                        <td><span class="mode-indicator">3</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X2(CC)</span></td>
                                        <td><span class="lane-config">X2(CC)</span></td>
                                    </tr>
                                    <tr data-mode="4">
                                        <td><span class="mode-indicator">4</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X8(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                    </tr>
                                    <tr data-mode="5">
                                        <td><span class="mode-indicator">5</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                    </tr>
                                    <tr data-mode="6">
                                        <td><span class="mode-indicator">6</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- I2C Dashboard -->
            <div id="i2c-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">I2C/I3C Interface</h2>
                    <p class="dashboard-subtitle">Configure and monitor I2C/I3C communication interfaces</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîó</div>
                                I2C/I3C Commands
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="i2cCommandInput" class="form-control" placeholder="Enter I2C/I3C command..." disabled>
                            <button id="sendI2cCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="i2cPresets">
                            <div class="preset-btn" data-cmd="I2C_SCAN" data-desc="Scan I2C bus">
                                <div class="preset-title">I2C Scan</div>
                                <div class="preset-command">I2C_SCAN</div>
                            </div>
                            <div class="preset-btn" data-cmd="I3C_STATUS" data-desc="I3C status">
                                <div class="preset-title">I3C Status</div>
                                <div class="preset-command">I3C_STATUS</div>
                            </div>
                        </div>

                        <div class="console-container" id="i2cConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">I2C/I3C interface ready for commands.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Dashboard -->
            <div id="advanced-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Advanced Diagnostics</h2>
                    <p class="dashboard-subtitle">Advanced hardware diagnostics and testing tools</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üî¨</div>
                                Advanced Commands
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="advancedCommandInput" class="form-control" placeholder="Enter advanced command..." disabled>
                            <button id="sendAdvancedCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="advancedPresets">
                            <div class="preset-btn" data-cmd="DIAG_FULL" data-desc="Full diagnostics">
                                <div class="preset-title">Full Diagnostics</div>
                                <div class="preset-command">DIAG_FULL</div>
                            </div>
                            <div class="preset-btn" data-cmd="MEM_TEST" data-desc="Memory test">
                                <div class="preset-title">Memory Test</div>
                                <div class="preset-command">MEM_TEST</div>
                            </div>
                        </div>

                        <div class="console-container" id="advancedConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Advanced diagnostics ready.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resets Dashboard -->
            <div id="resets-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">System Resets</h2>
                    <p class="dashboard-subtitle">Hardware reset controls and recovery options</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîÑ</div>
                                Reset Commands
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="resetCommandInput" class="form-control" placeholder="Enter reset command..." disabled>
                            <button id="sendResetCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="resetPresets">
                            <div class="preset-btn" data-cmd="SOFT_RESET" data-desc="Soft reset">
                                <div class="preset-title">Soft Reset</div>
                                <div class="preset-command">SOFT_RESET</div>
                            </div>
                            <div class="preset-btn" data-cmd="HARD_RESET" data-desc="Hard reset">
                                <div class="preset-title">Hard Reset</div>
                                <div class="preset-command">HARD_RESET</div>
                            </div>
                        </div>

                        <div class="console-container" id="resetConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Reset controls ready. Use caution with reset commands.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Firmware Dashboard -->
            <div id="firmware-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Firmware Updates</h2>
                    <p class="dashboard-subtitle">Firmware version management and update controls</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚¨ÜÔ∏è</div>
                                Firmware Commands
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="firmwareCommandInput" class="form-control" placeholder="Enter firmware command..." disabled>
                            <button id="sendFirmwareCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="firmwarePresets">
                            <div class="preset-btn" data-cmd="FW_VERSION" data-desc="Firmware version">
                                <div class="preset-title">FW Version</div>
                                <div class="preset-command">FW_VERSION</div>
                            </div>
                            <div class="preset-btn" data-cmd="FW_CHECK" data-desc="Check for updates">
                                <div class="preset-title">Check Updates</div>
                                <div class="preset-command">FW_CHECK</div>
                            </div>
                        </div>

                        <div class="console-container" id="firmwareConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Firmware management ready.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Dashboard -->
            <div id="analytics-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">System Analytics</h2>
                    <p class="dashboard-subtitle">Command history, performance metrics, and system analytics</p>
                </div>

                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="totalCommands">0</div>
                        <div class="metric-label">Total Commands</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="successfulCommands">0</div>
                        <div class="metric-label">Successful</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="errorCommands">0</div>
                        <div class="metric-label">Errors</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="avgResponseTime">0ms</div>
                        <div class="metric-label">Avg Response</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìä</div>
                                Command Performance
                            </div>
                            <button class="btn btn-sm btn-outline" id="clearAnalytics">
                                <span>üóëÔ∏è</span> Clear History
                            </button>
                        </div>

                        <canvas id="performanceChart" width="400" height="200"></canvas>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìã</div>
                                Command History
                            </div>
                        </div>

                        <div class="command-history" id="commandHistory">
                            <div class="history-entry">
                                <div class="history-timestamp">System Start</div>
                                <div class="history-command">Analytics tracking initialized</div>
                                <div class="history-status success">System</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- CalypsoPy+ Scripts -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>

</body>
</html>