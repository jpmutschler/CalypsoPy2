<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalypsoPy+ by Serial Cables - Professional Hardware Interface</title>

    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>

    <!-- CalypsoPy+ Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîå</text></svg>">
</head>
<body>
    <!-- Header Bar -->
    <div class="header-bar">
        <div class="brand-logo">
            <div class="brand-icon">CP</div>
            <div class="brand-text">
                <h1>CalypsoPy+</h1>
                <div class="tagline">by Serial Cables</div>
            </div>
        </div>

        <div class="header-controls">
            <div id="connectionStatus" class="connection-status disconnected">
                <div class="status-dot"></div>
                <span>Disconnected</span>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="nav-section">
                <h3>Connection</h3>
                <div class="nav-item" data-dashboard="connection">
                    <div class="nav-icon">üîå</div>
                    <div class="nav-text">Device Connection</div>
                </div>
            </div>

            <div class="nav-section">
                <h3>Dashboards</h3>
                <div class="nav-item active" data-dashboard="device_info">
                    <div class="nav-icon">üìã</div>
                    <div class="nav-text">Device Info</div>
                </div>
                <div class="nav-item" data-dashboard="link_status">
                    <div class="nav-icon">üì°</div>
                    <div class="nav-text">Link Status</div>
                </div>
                <div class="nav-item" data-dashboard="port_config">
                    <div class="nav-icon">‚öôÔ∏è</div>
                    <div class="nav-text">Port Configuration</div>
                </div>
                <div class="nav-item" data-dashboard="i2c">
                    <div class="nav-icon">üîó</div>
                    <div class="nav-text">I2C/I3C</div>
                </div>
                <div class="nav-item" data-dashboard="advanced">
                    <div class="nav-icon">üî¨</div>
                    <div class="nav-text">Advanced</div>
                </div>
                <div class="nav-item" data-dashboard="resets">
                    <div class="nav-icon">üîÑ</div>
                    <div class="nav-text">Resets</div>
                </div>
                <div class="nav-item" data-dashboard="firmware">
                    <div class="nav-icon">‚¨ÜÔ∏è</div>
                    <div class="nav-text">Firmware Updates</div>
                </div>
            </div>

            <div class="nav-section">
                <h3>System</h3>
                <div class="nav-item" data-dashboard="analytics">
                    <div class="nav-icon">üìä</div>
                    <div class="nav-text">Analytics</div>
                    <div class="nav-badge" id="commandCount">0</div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Connection Dashboard -->
            <div id="connection-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Device Connection</h2>
                    <p class="dashboard-subtitle">Connect to your hardware device to begin diagnostics and control</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîå</div>
                                Serial Port Selection
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Available Ports</label>
                            <select id="portSelect" class="form-control">
                                <option value="">Scanning for devices...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Connection Properties</label>
                            <div style="background: var(--light-gray); padding: 15px; border-radius: 10px; font-size: 14px; color: var(--secondary-gray);">
                                <strong>Baud Rate:</strong> 115,200 bps<br>
                                <strong>Data Bits:</strong> 8<br>
                                <strong>Parity:</strong> None<br>
                                <strong>Stop Bits:</strong> 1<br>
                                <strong>Flow Control:</strong> None<br>
                                <strong>Timeout:</strong> 2.0 seconds
                            </div>
                        </div>

                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <button id="connectBtn" class="btn btn-primary" disabled>
                                <span>üîó</span> Connect Device
                            </button>
                            <button id="disconnectBtn" class="btn btn-secondary" disabled>
                                <span>üîå</span> Disconnect
                            </button>
                            <button id="refreshBtn" class="btn btn-outline">
                                <span>üîÑ</span> Refresh Ports
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìä</div>
                                Connection Status
                            </div>
                        </div>

                        <div id="connectionDetails">
                            <p style="color: var(--secondary-gray); font-style: italic;">No device connected</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Device Info Dashboard -->
            <div id="device_info-dashboard" class="dashboard-content active">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Device Information</h2>
                    <p class="dashboard-subtitle">Hardware identification and system status information</p>
                </div>

                <!-- System Overview Cards -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="deviceModel">Unknown</div>
                        <div class="metric-label">Device Model</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="firmwareVersion">Unknown</div>
                        <div class="metric-label">Firmware Version</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="serialNumber">Unknown</div>
                        <div class="metric-label">Serial Number</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="boardTemp">--¬∞C</div>
                        <div class="metric-label">Board Temperature</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Hardware Information -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîß</div>
                                Hardware Information
                            </div>
                            <button class="btn btn-sm btn-outline" id="refreshDeviceInfo">
                                <span>üîÑ</span> Refresh
                            </button>
                        </div>

                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">S/N</label>
                                <span class="info-value" id="hwSerialNumber">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Company</label>
                                <span class="info-value" id="hwCompany">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Model</label>
                                <span class="info-value" id="hwModel">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Version</label>
                                <span class="info-value" id="hwVersion">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">SDK Version</label>
                                <span class="info-value" id="sdkVersion">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Thermal Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üå°Ô∏è</div>
                                Thermal Status
                            </div>
                        </div>

                        <div class="thermal-display">
                            <div class="thermal-item">
                                <div class="thermal-label">Board Temperature</div>
                                <div class="thermal-value" id="thermalBoardTemp">--¬∞C</div>
                                <div class="thermal-status" id="thermalBoardStatus">Normal</div>
                            </div>
                            <div class="thermal-item">
                                <div class="thermal-label">Fan Speed</div>
                                <div class="thermal-value" id="fanSpeed">-- RPM</div>
                                <div class="thermal-bar">
                                    <div class="thermal-bar-fill" id="fanSpeedBar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Voltage Sensors -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚ö°</div>
                                Voltage Sensors
                            </div>
                        </div>

                        <div class="voltage-grid" id="voltageGrid">
                            <!-- Voltage items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Current Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîã</div>
                                Current Status
                            </div>
                        </div>

                        <div class="current-display">
                            <div class="current-item">
                                <div class="current-label">Board Current</div>
                                <div class="current-value" id="boardCurrent">-- mA</div>
                            </div>
                        </div>
                    </div>

                    <!-- Port Configuration -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîå</div>
                                Port Configuration
                            </div>
                        </div>

                        <div class="port-grid" id="portGrid">
                            <!-- Port items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Error Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚ö†Ô∏è</div>
                                Error Status
                            </div>
                        </div>

                        <div class="error-grid" id="errorGrid">
                            <!-- Error items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Command Interface -->
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üí¨</div>
                                Device Commands
                            </div>
                            <div class="card-actions">
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--secondary-gray);">
                                    <input type="checkbox" id="useCacheDevice" checked> Use cache
                                </label>
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="deviceCommandInput" class="form-control" placeholder="Enter custom command..." disabled>
                            <button id="sendDeviceCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="devicePresets">
                            <div class="preset-btn" data-cmd="sysinfo" data-desc="System information">
                                <div class="preset-title">System Info</div>
                                <div class="preset-command">sysinfo</div>
                            </div>
                            <div class="preset-btn" data-cmd="version" data-desc="Firmware version">
                                <div class="preset-title">Version Info</div>
                                <div class="preset-command">version</div>
                            </div>
                            <div class="preset-btn" data-cmd="temp" data-desc="Temperature readings">
                                <div class="preset-title">Temperature</div>
                                <div class="preset-command">temp</div>
                            </div>
                            <div class="preset-btn" data-cmd="voltage" data-desc="Voltage readings">
                                <div class="preset-title">Voltage</div>
                                <div class="preset-command">voltage</div>
                            </div>
                            <div class="preset-btn" data-cmd="current" data-desc="Current readings">
                                <div class="preset-title">Current</div>
                                <div class="preset-command">current</div>
                            </div>
                            <div class="preset-btn" data-cmd="status" data-desc="Overall status">
                                <div class="preset-title">Status</div>
                                <div class="preset-command">status</div>
                            </div>
                        </div>

                        <div class="console-container" id="deviceConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">CalypsoPy+ Device Info Dashboard initialized. Connect to a device to view system information.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Link Status Dashboard -->
            <div id="link_status-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Link Status</h2>
                    <p class="dashboard-subtitle">Monitor communication link quality and connection statistics</p>
                </div>

                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="linkState">Unknown</div>
                        <div class="metric-label">Link State</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="signalStrength">-</div>
                        <div class="metric-label">Signal Strength</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="errorCount">0</div>
                        <div class="metric-label">Error Count</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="packetCount">0</div>
                        <div class="metric-label">Packet Count</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üì°</div>
                                Link Status Commands
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="linkCommandInput" class="form-control" placeholder="Enter link status command..." disabled>
                            <button id="sendLinkCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="linkPresets">
                            <div class="preset-btn" data-cmd="AT+CSQ" data-desc="Signal quality">
                                <div class="preset-title">Signal Quality</div>
                                <div class="preset-command">AT+CSQ</div>
                            </div>
                            <div class="preset-btn" data-cmd="AT+COPS?" data-desc="Network status">
                                <div class="preset-title">Network Status</div>
                                <div class="preset-command">AT+COPS?</div>
                            </div>
                            <div class="preset-btn" data-cmd="AT+CREG?" data-desc="Registration status">
                                <div class="preset-title">Registration</div>
                                <div class="preset-command">AT+CREG?</div>
                            </div>
                            <div class="preset-btn" data-cmd="LINK_STATUS" data-desc="Link diagnostics">
                                <div class="preset-title">Link Diag</div>
                                <div class="preset-command">LINK_STATUS</div>
                            </div>
                        </div>

                        <div class="console-container" id="linkConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Link Status monitoring ready. Execute commands to check connection quality.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Port Configuration Dashboard -->
            <div id="port_config-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Port Configuration</h2>
                    <p class="dashboard-subtitle">Configure and monitor serial port settings and parameters</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚öôÔ∏è</div>
                                Port Settings
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Data Bits</label>
                            <select class="form-control" id="dataBitsSelect">
                                <option value="5">5 bits</option>
                                <option value="6">6 bits</option>
                                <option value="7">7 bits</option>
                                <option value="8" selected>8 bits</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Parity</label>
                            <select class="form-control" id="paritySelect">
                                <option value="none" selected>None</option>
                                <option value="odd">Odd</option>
                                <option value="even">Even</option>
                                <option value="mark">Mark</option>
                                <option value="space">Space</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Stop Bits</label>
                            <select class="form-control" id="stopBitsSelect">
                                <option value="1" selected>1 bit</option>
                                <option value="1.5">1.5 bits</option>
                                <option value="2">2 bits</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Flow Control</label>
                            <select class="form-control" id="flowControlSelect">
                                <option value="none" selected>None</option>
                                <option value="rts_cts">RTS/CTS</option>
                                <option value="xon_xoff">XON/XOFF</option>
                            </select>
                        </div>

                        <button class="btn btn-primary" id="applyPortConfig">
                            <span>‚úÖ</span> Apply Configuration
                        </button>
                    </div>

                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîß</div>
                                Configuration Commands
                            </div>
                        </div>

                        <div class="command-presets" id="configPresets">
                            <div class="preset-btn" data-cmd="AT+IPR?" data-desc="Get baud rate">
                                <div class="preset-title">Get Baud Rate</div>
                                <div class="preset-command">AT+IPR?</div>
                            </div>
                            <div class="preset-btn" data-cmd="AT+ICF?" data-desc="Get format">
                                <div class="preset-title">Get Format</div>
                                <div class="preset-command">AT+ICF?</div>
                            </div>
                            <div class="preset-btn" data-cmd="AT+IFC?" data-desc="Flow control">
                                <div class="preset-title">Flow Control</div>
                                <div class="preset-command">AT+IFC?</div>
                            </div>
                            <div class="preset-btn" data-cmd="CONFIG_STATUS" data-desc="Port status">
                                <div class="preset-title">Port Status</div>
                                <div class="preset-command">CONFIG_STATUS</div>
                            </div>
                        </div>

                        <div class="console-container" id="configConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Port Configuration dashboard ready. Modify settings and apply configuration.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- I2C/I3C Dashboard -->
            <div id="i2c-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">I2C/I3C Interface</h2>
                    <p class="dashboard-subtitle">Configure and communicate with I2C and I3C devices</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîó</div>
                                I2C Configuration
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Device Address (Hex)</label>
                            <input type="text" class="form-control" id="i2cAddress" placeholder="0x48" pattern="^0x[0-9A-Fa-f]{1,2}$">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Clock Speed</label>
                            <select class="form-control" id="i2cSpeed">
                                <option value="100000">100 kHz (Standard)</option>
                                <option value="400000" selected>400 kHz (Fast)</option>
                                <option value="1000000">1 MHz (Fast+)</option>
                                <option value="3400000">3.4 MHz (High Speed)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Data to Write (Hex)</label>
                            <input type="text" class="form-control" id="i2cData" placeholder="0x01 0x02 0x03">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Bytes to Read</label>
                            <input type="number" class="form-control" id="i2cReadBytes" value="1" min="1" max="255">
                        </div>

                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn btn-primary btn-sm" id="i2cScan">
                                <span>üîç</span> Scan Bus
                            </button>
                            <button class="btn btn-primary btn-sm" id="i2cRead">
                                <span>üìñ</span> Read
                            </button>
                            <button class="btn btn-primary btn-sm" id="i2cWrite">
                                <span>‚úèÔ∏è</span> Write
                            </button>
                        </div>
                    </div>

                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚ö°</div>
                                I2C Commands
                            </div>
                        </div>

                        <div class="command-presets" id="i2cPresets">
                            <div class="preset-btn" data-cmd="I2C_SCAN" data-desc="Scan I2C bus">
                                <div class="preset-title">Scan I2C Bus</div>
                                <div class="preset-command">I2C_SCAN</div>
                            </div>
                            <div class="preset-btn" data-cmd="I2C_READ 0x48 1" data-desc="Read from device">
                                <div class="preset-title">Read Device</div>
                                <div class="preset-command">I2C_READ 0x48 1</div>
                            </div>
                            <div class="preset-btn" data-cmd="I2C_WRITE 0x48 0x01" data-desc="Write to device">
                                <div class="preset-title">Write Device</div>
                                <div class="preset-command">I2C_WRITE 0x48 0x01</div>
                            </div>
                            <div class="preset-btn" data-cmd="I2C_CONFIG" data-desc="Show I2C config">
                                <div class="preset-title">I2C Config</div>
                                <div class="preset-command">I2C_CONFIG</div>
                            </div>
                        </div>

                        <div class="console-container" id="i2cConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">I2C/I3C interface ready. Configure device address and execute I2C operations.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Dashboard -->
            <div id="advanced-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Advanced Diagnostics</h2>
                    <p class="dashboard-subtitle">Advanced hardware diagnostics and low-level system access</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üî¨</div>
                                Advanced Commands
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="advancedCommandInput" class="form-control" placeholder="Enter advanced command..." disabled>
                            <button id="sendAdvancedCmd" class="btn btn-primary" disabled>
                                <span>‚ö°</span> Execute
                            </button>
                        </div>

                        <div class="command-presets" id="advancedPresets">
                            <div class="preset-btn" data-cmd="REG_READ 0x1000" data-desc="Read register">
                                <div class="preset-title">Read Register</div>
                                <div class="preset-command">REG_READ 0x1000</div>
                            </div>
                            <div class="preset-btn" data-cmd="REG_WRITE 0x1000 0xFF" data-desc="Write register">
                                <div class="preset-title">Write Register</div>
                                <div class="preset-command">REG_WRITE 0x1000 0xFF</div>
                            </div>
                            <div class="preset-btn" data-cmd="MEM_DUMP 0x0000 256" data-desc="Memory dump">
                                <div class="preset-title">Memory Dump</div>
                                <div class="preset-command">MEM_DUMP 0x0000 256</div>
                            </div>
                            <div class="preset-btn" data-cmd="DIAG_TEMP" data-desc="Temperature reading">
                                <div class="preset-title">Temperature</div>
                                <div class="preset-command">DIAG_TEMP</div>
                            </div>
                            <div class="preset-btn" data-cmd="DIAG_VOLT" data-desc="Voltage reading">
                                <div class="preset-title">Voltage</div>
                                <div class="preset-command">DIAG_VOLT</div>
                            </div>
                            <div class="preset-btn" data-cmd="DEBUG_MODE ON" data-desc="Enable debug">
                                <div class="preset-title">Debug Mode</div>
                                <div class="preset-command">DEBUG_MODE ON</div>
                            </div>
                        </div>

                        <div class="console-container" id="advancedConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Advanced diagnostics ready. Use caution with low-level commands.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resets Dashboard -->
            <div id="resets-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">System Resets</h2>
                    <p class="dashboard-subtitle">Perform various types of system resets and recovery operations</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîÑ</div>
                                Reset Operations
                            </div>
                        </div>

                        <div style="display: grid; gap: 15px;">
                            <button class="btn btn-outline" id="softReset" style="justify-content: flex-start;">
                                <span>üîÑ</span>
                                <div style="text-align: left;">
                                    <div style="font-weight: 600;">Soft Reset</div>
                                    <div style="font-size: 12px; opacity: 0.7;">Restart without losing configuration</div>
                                </div>
                            </button>

                            <button class="btn btn-outline" id="hardReset" style="justify-content: flex-start;">
                                <span>‚ö°</span>
                                <div style="text-align: left;">
                                    <div style="font-weight: 600;">Hard Reset</div>
                                    <div style="font-size: 12px; opacity: 0.7;">Full power cycle reset</div>
                                </div>
                            </button>

                            <button class="btn btn-outline" id="factoryReset" style="justify-content: flex-start; border-color: #ef4444; color: #ef4444;">
                                <span>üè≠</span>
                                <div style="text-align: left;">
                                    <div style="font-weight: 600;">Factory Reset</div>
                                    <div style="font-size: 12px; opacity: 0.7;">Reset to factory defaults (WARNING)</div>
                                </div>
                            </button>

                            <button class="btn btn-outline" id="configReset" style="justify-content: flex-start;">
                                <span>‚öôÔ∏è</span>
                                <div style="text-align: left;">
                                    <div style="font-weight: 600;">Configuration Reset</div>
                                    <div style="font-size: 12px; opacity: 0.7;">Reset configuration only</div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìü</div>
                                Reset Commands
                            </div>
                        </div>

                        <div class="command-presets" id="resetPresets">
                            <div class="preset-btn" data-cmd="AT+CFUN=1,1" data-desc="Soft reset">
                                <div class="preset-title">Soft Reset</div>
                                <div class="preset-command">AT+CFUN=1,1</div>
                            </div>
                            <div class="preset-btn" data-cmd="RESET HARD" data-desc="Hard reset">
                                <div class="preset-title">Hard Reset</div>
                                <div class="preset-command">RESET HARD</div>
                            </div>
                            <div class="preset-btn" data-cmd="FACTORY_RESET" data-desc="Factory reset">
                                <div class="preset-title">Factory Reset</div>
                                <div class="preset-command">FACTORY_RESET</div>
                            </div>
                            <div class="preset-btn" data-cmd="RESET_CONFIG" data-desc="Config reset">
                                <div class="preset-title">Config Reset</div>
                                <div class="preset-command">RESET_CONFIG</div>
                            </div>
                        </div>

                        <div class="console-container" id="resetConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Reset operations ready. Use caution - some operations are irreversible.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Firmware Dashboard -->
            <div id="firmware-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Firmware Updates</h2>
                    <p class="dashboard-subtitle">Manage firmware updates and version control</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚¨ÜÔ∏è</div>
                                Firmware Management
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Current Version</label>
                            <input type="text" class="form-control" id="currentFwVersion" readonly placeholder="Unknown">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Update Progress</label>
                            <div style="background: var(--light-gray); border-radius: 10px; height: 20px; overflow: hidden;">
                                <div id="updateProgress" style="background: var(--gradient-primary); height: 100%; width: 0%; transition: width 0.3s ease; border-radius: 10px;"></div>
                            </div>
                            <div id="progressText" style="font-size: 12px; color: var(--secondary-gray); margin-top: 5px;">Ready</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Firmware File</label>
                            <input type="file" class="form-control" id="firmwareFile" accept=".bin,.hex,.fw">
                        </div>

                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn btn-primary" id="checkUpdate">
                                <span>üîç</span> Check Version
                            </button>
                            <button class="btn btn-outline" id="uploadFirmware" disabled>
                                <span>‚¨ÜÔ∏è</span> Upload Firmware
                            </button>
                        </div>
                    </div>

                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîß</div>
                                Firmware Commands
                            </div>
                        </div>

                        <div class="command-presets" id="firmwarePresets">
                            <div class="preset-btn" data-cmd="FW_VERSION" data-desc="Check version">
                                <div class="preset-title">Check Version</div>
                                <div class="preset-command">FW_VERSION</div>
                            </div>
                            <div class="preset-btn" data-cmd="FW_UPDATE_MODE" data-desc="Update mode">
                                <div class="preset-title">Update Mode</div>
                                <div class="preset-command">FW_UPDATE_MODE</div>
                            </div>
                            <div class="preset-btn" data-cmd="FW_VERIFY" data-desc="Verify firmware">
                                <div class="preset-title">Verify FW</div>
                                <div class="preset-command">FW_VERIFY</div>
                            </div>
                            <div class="preset-btn" data-cmd="BOOTLOADER" data-desc="Enter bootloader">
                                <div class="preset-title">Bootloader</div>
                                <div class="preset-command">BOOTLOADER</div>
                            </div>
                        </div>

                        <div class="console-container" id="firmwareConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Firmware update system ready. Check current version before updating.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Dashboard -->
            <div id="analytics-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">System Analytics</h2>
                    <p class="dashboard-subtitle">Performance metrics and system usage statistics</p>
                </div>

                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="totalCommands">0</div>
                        <div class="metric-label">Total Commands</div>
                        <div class="metric-trend up" id="commandsTrend">+0%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="successRate">0%</div>
                        <div class="metric-label">Success Rate</div>
                        <div class="metric-trend up" id="successTrend">+0%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="avgResponseTime">0ms</div>
                        <div class="metric-label">Avg Response Time</div>
                        <div class="metric-trend down" id="responseTrend">-0%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="cacheHitRate">0%</div>
                        <div class="metric-label">Cache Hit Rate</div>
                        <div class="metric-trend up" id="cacheTrend">+0%</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìä</div>
                                Response Time Trends
                            </div>
                        </div>
                        <canvas id="responseChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- CalypsoPy+ JavaScript Application -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>