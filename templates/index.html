<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalypsoPy+ by Serial Cables - Gen6 PCIe/NVMe Atlas 3 Host Card Interface and Validation Tester</title>

    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>

    <!-- CalypsoPy+ Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîå</text></svg>">
</head>
<body>
    <!-- Header Bar -->
    <div class="header-bar">
        <div class="brand-logo">
            <div class="brand-icon">CP+</div>
            <div class="brand-text">
                <h1>CalypsoPy+</h1>
                <div class="tagline">by Serial Cables</div>
            </div>
        </div>

        <div class="header-controls">
            <div class="developer-mode-toggle">
                <label style="display: flex; align-items: center; gap: 8px; color: rgba(255, 255, 255, 0.8); font-size: 13px; font-weight: 500; cursor: pointer;">
                    <input type="checkbox" id="developerMode" style="transform: scale(1.2);">
                    <span>üîì Developer Mode</span>
                </label>
            </div>
            <div id="connectionStatus" class="connection-status disconnected">
                <div class="status-dot"></div>
                <span>Disconnected</span>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="nav-section">
                <h3>Connection</h3>
                <div class="nav-item active" data-dashboard="connection">
                    <div class="nav-icon">üîå</div>
                    <div class="nav-text">Device Connection</div>
                </div>
            </div>

            <div class="nav-section">
                <h3>Dashboards</h3>
                <div class="nav-item" data-dashboard="device_info">
                    <div class="nav-icon">üìã</div>
                    <div class="nav-text">Device Info</div>
                </div>
                <div class="nav-item" data-dashboard="link_status">
                    <div class="nav-icon">üì°</div>
                    <div class="nav-text">Link Status</div>
                </div>
                <div class="nav-item" data-dashboard="bifurcation">
                    <div class="nav-icon">üîÄ</div>
                    <div class="nav-text">Bifurcation</div>
                </div>
                <div class="nav-item" data-dashboard="registers">
                    <div class="nav-icon">üìù</div>
                    <div class="nav-text">Registers</div>
                </div>
                <div class="nav-item" data-dashboard="advanced">
                    <div class="nav-icon">üî¨</div>
                    <div class="nav-text">Advanced</div>
                </div>
                <div class="nav-item" data-dashboard="errors">
                    <div class="nav-icon">‚ö†Ô∏è</div>
                    <div class="nav-text">Errors</div>
                </div>
                <div class="nav-item" data-dashboard="testing">
                    <div class="nav-icon">üß™</div>
                    <div class="nav-text">PCIe/NVMe Testing</div>
                </div>
                <div class="nav-item" data-dashboard="resets">
                    <div class="nav-icon">üîÑ</div>
                    <div class="nav-text">Resets</div>
                </div>
                <div class="nav-item" data-dashboard="firmware">
                    <div class="nav-icon">‚¨ÜÔ∏è</div>
                    <div class="nav-text">Firmware Updates</div>
                </div>
                <div class="nav-item" data-dashboard="terminal">
                    <div class="nav-icon">‚å®Ô∏è</div>
                    <div class="nav-text">Terminal</div>
                </div>
            </div>

            <div class="nav-section">
                <h3>System</h3>
                <div class="nav-item" data-dashboard="analytics">
                    <div class="nav-icon">üìä</div>
                    <div class="nav-text">Analytics</div>
                    <div class="nav-badge" id="commandCount">0</div>
                </div>
                <div class="nav-item" data-dashboard="user-manual">
                    <div class="nav-icon">üìö</div>
                    <div class="nav-text">User's Manual</div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Connection Dashboard -->
            <div id="connection-dashboard" class="dashboard-content active">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Device Connection</h2>
                    <p class="dashboard-subtitle">Connect to your hardware device to begin diagnostics and control</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîå</div>
                                Serial Port Selection
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Available Ports</label>
                            <select id="portSelect" class="form-control">
                                <option value="">Scanning for devices...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Connection Properties</label>
                            <div style="background: var(--light-gray); padding: 15px; border-radius: 10px; font-size: 14px; color: var(--secondary-gray);">
                                <strong>Baud Rate:</strong> 115,200 bps<br>
                                <strong>Data Bits:</strong> 8<br>
                                <strong>Parity:</strong> None<br>
                                <strong>Stop Bits:</strong> 1<br>
                                <strong>Flow Control:</strong> None<br>
                                <strong>Timeout:</strong> 2.0 seconds
                            </div>
                        </div>

                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <button id="connectBtn" class="btn btn-primary" disabled>
                                <span>üîó</span> Connect Device
                            </button>
                            <button id="disconnectBtn" class="btn btn-secondary" disabled>
                                <span>üîå</span> Disconnect
                            </button>
                            <button id="refreshBtn" class="btn btn-outline">
                                <span>üîÑ</span> Refresh Ports
                            </button>
                            <button id="testApiBtn" class="btn btn-outline" style="background-color: #28a745; color: white;">
                                <span>üß™</span> Test API
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìä</div>
                                Connection Status
                            </div>
                        </div>

                        <div id="connectionDetails">
                            <p style="color: var(--secondary-gray); font-style: italic;">No device connected</p>
                        </div>

                        <div style="margin-top: 20px; padding: 15px; background: var(--light-gray); border-radius: 10px;">
                            <h4 style="color: var(--primary-red); margin-bottom: 10px; font-size: 16px;">üöÄ Getting Started</h4>
                            <ol style="color: var(--secondary-gray); font-size: 14px; line-height: 1.6; margin-left: 20px;">
                                <li>Connect your hardware device via USB/Serial cable</li>
                                <li>Click "Refresh Ports" to scan for new devices</li>
                                <li>Select your device from the dropdown menu</li>
                                <li>Click "Connect Device" to establish connection</li>
                                <li>Once connected, you'll be taken to Device Information</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Device Info Dashboard -->
            <div id="device_info-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">Device Information</h2>
                            <p class="dashboard-subtitle">Hardware identification and system status information</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="exportDeviceInfo">
                                <span>üìÑ</span> Export Report
                            </button>
                        </div>
                    </div>
                </div>

                <!-- System Overview Cards -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="deviceModel">Unknown</div>
                        <div class="metric-label">Device Model</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="firmwareVersion">Unknown</div>
                        <div class="metric-label">Firmware Version</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="serialNumber">Unknown</div>
                        <div class="metric-label">Serial Number</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="boardTemp">--¬∞C</div>
                        <div class="metric-label">Board Temperature</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Hardware Information -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîß</div>
                                Hardware Information
                            </div>
                            <button class="btn btn-sm btn-outline" id="refreshDeviceInfo">
                                <span>üîÑ</span> Refresh
                            </button>
                        </div>

                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">S/N</label>
                                <span class="info-value" id="hwSerialNumber">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Company</label>
                                <span class="info-value" id="hwCompany">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Model</label>
                                <span class="info-value" id="hwModel">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Version</label>
                                <span class="info-value" id="hwVersion">--</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">SDK Version</label>
                                <span class="info-value" id="sdkVersion">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Thermal Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üå°Ô∏è</div>
                                Thermal Status
                            </div>
                        </div>

                        <div class="thermal-display">
                            <div class="thermal-item">
                                <div class="thermal-label">Board Temperature</div>
                                <div class="thermal-value" id="thermalBoardTemp">--¬∞C</div>
                                <div class="thermal-status" id="thermalBoardStatus">Normal</div>
                            </div>
                            <div class="thermal-item">
                                <div class="thermal-label">Fan Speed</div>
                                <div class="thermal-value" id="fanSpeed">-- RPM</div>
                                <div class="thermal-bar">
                                    <div class="thermal-bar-fill" id="fanSpeedBar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Voltage Sensors -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚ö°</div>
                                Voltage Sensors
                            </div>
                        </div>

                        <div class="voltage-grid" id="voltageGrid">
                            <!-- Voltage items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Current Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîã</div>
                                Current Status
                            </div>
                        </div>

                        <div class="current-display">
                            <div class="current-item">
                                <div class="current-label">Board Current</div>
                                <div class="current-value" id="boardCurrent">-- mA</div>
                            </div>
                        </div>
                    </div>

                    <!-- Port Configuration -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîå</div>
                                Port Configuration
                            </div>
                        </div>

                        <div class="port-grid" id="portGrid">
                            <!-- Port items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Error Status -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚ö†Ô∏è</div>
                                Error Status
                            </div>
                        </div>

                        <div class="error-grid" id="errorGrid">
                            <!-- Error items will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Command Interface -->
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üí¨</div>
                                Device Commands
                            </div>
                            <div class="card-actions">
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--secondary-gray);">
                                    <input type="checkbox" id="useCacheDevice" checked> Use cache
                                </label>
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="deviceCommandInput" class="form-control" placeholder="Enter custom command..." disabled>
                            <button id="sendDeviceCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="devicePresets">
                            <div class="preset-btn" data-cmd="sysinfo" data-desc="System information">
                                <div class="preset-title">System Info</div>
                                <div class="preset-command">sysinfo</div>
                            </div>
                            <div class="preset-btn" data-cmd="version" data-desc="Firmware version">
                                <div class="preset-title">Version Info</div>
                                <div class="preset-command">version</div>
                            </div>
                            <div class="preset-btn" data-cmd="temp" data-desc="Temperature readings">
                                <div class="preset-title">Temperature</div>
                                <div class="preset-command">temp</div>
                            </div>
                            <div class="preset-btn" data-cmd="voltage" data-desc="Voltage readings">
                                <div class="preset-title">Voltage</div>
                                <div class="preset-command">voltage</div>
                            </div>
                            <div class="preset-btn" data-cmd="current" data-desc="Current readings">
                                <div class="preset-title">Current</div>
                                <div class="preset-command">current</div>
                            </div>
                            <div class="preset-btn" data-cmd="status" data-desc="Overall status">
                                <div class="preset-title">Status</div>
                                <div class="preset-command">status</div>
                            </div>
                        </div>

                        <div class="console-container" id="deviceConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">CalypsoPy+ Device Info Dashboard initialized. Connect to a device to view system information.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Link Status Dashboard -->
            <div id="link_status-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">Link Status</h2>
                            <p class="dashboard-subtitle">Monitor PCIe port connections and lane configurations</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="refreshLinkStatus">
                                <span>üîÑ</span> Refresh Status
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Metrics Overview -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="totalPorts">--</div>
                        <div class="metric-label">Total Ports</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="activePorts">--</div>
                        <div class="metric-label">Active Connections</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="goldenFingerStatus">--</div>
                        <div class="metric-label">Golden Finger</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="maxSpeed">--</div>
                        <div class="metric-label">Maximum Speed</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Port Status Grid -->
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üì°</div>
                                PCIe Port Status
                            </div>
                        </div>

                        <div class="port-status-grid" id="portStatusGrid">
                            <div class="port-status-loading">
                                <div class="loading"></div>
                                <p>Connect to a device and run 'showport' to view port status</p>
                            </div>
                        </div>
                    </div>

                    <!-- Command Interface -->
                    <div class="card command-interface" style="grid-column: span 2;">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üí¨</div>
                                Link Status Commands
                            </div>
                            <div class="card-actions">
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--secondary-gray);">
                                    <input type="checkbox" id="useCacheLinkStatus" checked> Use cache
                                </label>
                            </div>
                        </div>

                        <div class="command-input-group">
                            <input type="text" id="linkCommandInput" class="form-control" placeholder="Enter link status command..." disabled>
                            <button id="sendLinkCmd" class="btn btn-primary" disabled>
                                <span>üì§</span> Send
                            </button>
                        </div>

                        <div class="command-presets" id="linkPresets">
                            <div class="preset-btn" data-cmd="showport" data-desc="Display port status and lane configurations">
                                <div class="preset-title">Show Ports</div>
                                <div class="preset-command">showport</div>
                            </div>
                            <div class="preset-btn" data-cmd="linkinfo" data-desc="Link information details">
                                <div class="preset-title">Link Info</div>
                                <div class="preset-command">linkinfo</div>
                            </div>
                            <div class="preset-btn" data-cmd="portstatus" data-desc="Detailed port status">
                                <div class="preset-title">Port Status</div>
                                <div class="preset-command">portstatus</div>
                            </div>
                            <div class="preset-btn" data-cmd="bandwidth" data-desc="Bandwidth utilization">
                                <div class="preset-title">Bandwidth</div>
                                <div class="preset-command">bandwidth</div>
                            </div>
                        </div>

                        <div class="console-container" id="linkConsole">
                            <div class="console-entry command">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Link Status monitoring ready. Execute 'showport' to view PCIe port connections.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bifurcation Dashboard -->
            <div id="bifurcation-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">PCIe Bifurcation Configuration</h2>
                            <p class="dashboard-subtitle">Monitor and configure PCIe lane bifurcation modes</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="refreshBifurcation">
                                <span>üîÑ</span> Refresh Mode
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Current Mode Overview -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="currentSBRMode">--</div>
                        <div class="metric-label">Current SBR Mode</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="goldenFingerConfig">--</div>
                        <div class="metric-label">Golden Finger</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="straddlePCIE">--</div>
                        <div class="metric-label">Straddle PCIE</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="mcioStatus">--</div>
                        <div class="metric-label">MCIO Status</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Current Configuration Card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîÄ</div>
                                Current Bifurcation Mode
                            </div>
                        </div>

                        <div id="bifurcationModeDisplay" class="bifurcation-mode-display">
                            <div class="bifurcation-mode-card">
                                <div class="bifurcation-mode-header">
                                    <span class="bifurcation-mode-number">Mode: --</span>
                                    <span class="bifurcation-status-badge active">ACTIVE</span>
                                </div>
                                <div class="bifurcation-mode-details">
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Golden Finger:</span>
                                        <span class="detail-value" id="modeGoldenFinger">--</span>
                                    </div>
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Straddle PCIE:</span>
                                        <span class="detail-value" id="modeStraddlePCIE">--</span>
                                    </div>
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Left MCIO:</span>
                                        <span class="detail-value" id="modeLeftMCIO">--</span>
                                    </div>
                                    <div class="bifurcation-detail-row">
                                        <span class="detail-label">Right MCIO:</span>
                                        <span class="detail-value" id="modeRightMCIO">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Available Modes Table -->
                    <div class="card bifurcation-modes-table">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìã</div>
                                Available Bifurcation Modes
                            </div>
                        </div>

                        <div class="bifurcation-table-container">
                            <table class="bifurcation-table">
                                <thead>
                                    <tr>
                                        <th>SBR Mode</th>
                                        <th>Golden Finger</th>
                                        <th>Straddle PCIE</th>
                                        <th>Left MCIO</th>
                                        <th>Right MCIO</th>
                                    </tr>
                                </thead>
                                <tbody id="bifurcationTableBody">
                                    <tr data-mode="0">
                                        <td><span class="mode-indicator">0</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                    </tr>
                                    <tr data-mode="1">
                                        <td><span class="mode-indicator">1</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X8(CC)</span></td>
                                        <td><span class="lane-config">X8(CC)</span></td>
                                    </tr>
                                    <tr data-mode="2">
                                        <td><span class="mode-indicator">2</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                    </tr>
                                    <tr data-mode="3">
                                        <td><span class="mode-indicator">3</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X2(CC)</span></td>
                                        <td><span class="lane-config">X2(CC)</span></td>
                                    </tr>
                                    <tr data-mode="4">
                                        <td><span class="mode-indicator">4</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X8(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                    </tr>
                                    <tr data-mode="5">
                                        <td><span class="mode-indicator">5</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                    </tr>
                                    <tr data-mode="6">
                                        <td><span class="mode-indicator">6</span></td>
                                        <td><span class="lane-config">X16(SSC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X16(CC)</span></td>
                                        <td><span class="lane-config">X4(CC)</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Registers Dashboard -->
			<div id="registers-dashboard" class="dashboard-content">
			    <div class="dashboard-header">
			        <h2 class="dashboard-title">Register Operations</h2>
			        <p class="dashboard-subtitle">Read, write, and dump PCIe 6.x switch registers</p>
			    </div>

			    <!-- Port Selector Card -->
			    <div class="card" style="margin-bottom: 20px;">
			        <div class="card-header">
			            <div class="card-title">
			                <div class="card-icon">üéØ</div>
			                Target Port Selection
			            </div>
			        </div>
			        <div style="padding: 20px;">
			            <div style="display: flex; gap: 20px; align-items: center;">
			                <div style="flex: 1;">
			                    <label class="form-label">Port Number (0-144)</label>
			                    <select id="regPortNumber" class="form-control">
			                        <!-- Populated by JavaScript -->
			                    </select>
			                </div>
			                <div style="flex: 2;">
			                    <label class="form-label">Calculated Base Address</label>
			                    <div style="padding: 12px; background: var(--light-gray); border-radius: 8px; font-family: monospace; font-weight: 600; color: var(--primary-red);" id="regBaseAddress">
			                        0x60800000
			                    </div>
			                </div>
			            </div>
			            <div style="margin-top: 15px; padding: 12px; background: rgba(121, 0, 0, 0.05); border-radius: 8px; border-left: 4px solid var(--primary-red);">
			                <div style="font-size: 13px; color: var(--dark-black);">
			                    <strong>Address Calculation:</strong> Base (0x60800000) + (Port √ó 0x8000 √ó 2)
			                </div>
			            </div>
			        </div>
			    </div>

			    <div class="dashboard-grid">
			        <!-- Command Interface Card -->
			        <div class="card command-interface">
			            <div class="card-header">
			                <div class="card-title">
			                    <div class="card-icon">‚å®Ô∏è</div>
			                    Register Commands
			                </div>
			                <button class="btn btn-sm btn-outline" id="clearRegistersConsole">
			                    <span>üóëÔ∏è</span> Clear
			                </button>
			            </div>

			            <!-- Manual Command Input -->
			            <div class="command-input-group">
			                <input type="text" id="registersCommandInput" class="form-control" placeholder="Enter register command (mr/mw/dr/dp)..." disabled>
			                <button id="sendRegistersCmd" class="btn btn-primary" disabled>
			                    <span>üì§</span> Send
			                </button>
			            </div>

			            <!-- Command Reference -->
			            <div style="margin-bottom: 20px; padding: 15px; background: var(--light-gray); border-radius: 10px; font-size: 13px;">
			                <div style="font-weight: 600; margin-bottom: 8px; color: var(--primary-red);">Command Syntax:</div>
			                <div style="display: grid; grid-template-columns: auto 1fr; gap: 8px 15px; font-family: monospace;">
			                    <strong>mr &lt;addr&gt;</strong>
			                    <span>Read 32-bit register</span>
			                    <strong>mw &lt;addr&gt; &lt;data&gt;</strong>
			                    <span>Write 32-bit register</span>
			                    <strong>dr &lt;addr&gt; &lt;count&gt;</strong>
			                    <span>Dump switch registers</span>
			                    <strong>dp &lt;port&gt;</strong>
			                    <span>Dump port registers</span>
			                </div>
			            </div>

			            <!-- Preset Buttons -->
			            <div class="command-presets" id="registersPresets">
			                <div class="preset-btn" data-cmd="port_status" data-desc="Read port status register">
			                    <div class="preset-title">üìä Port Status</div>
			                    <div class="preset-command">mr (base+0x0)</div>
			                </div>
			                <div class="preset-btn" data-cmd="link_control" data-desc="Read link control register">
			                    <div class="preset-title">üîó Link Control</div>
			                    <div class="preset-command">mr (base+0x10)</div>
			                </div>
			                <div class="preset-btn" data-cmd="port_dump" data-desc="Dump 32 port registers">
			                    <div class="preset-title">üìã Port Dump</div>
			                    <div class="preset-command">dr base 32</div>
			                </div>
			                <div class="preset-btn" data-cmd="port_config" data-desc="Dump all port configuration">
			                    <div class="preset-title">‚öôÔ∏è Full Port Config</div>
			                    <div class="preset-command">dp &lt;port&gt;</div>
			                </div>
			            </div>

			            <!-- Console Output -->
			            <div class="console-container" id="registersConsole">
			                <div class="console-entry command">
			                    <div class="console-timestamp">System Ready</div>
			                    <div class="console-content">Registers interface ready. Select a port to begin.</div>
			                </div>
			            </div>
			        </div>

			        <!-- Quick Reference Card -->
			        <div class="card">
			            <div class="card-header">
			                <div class="card-title">
			                    <div class="card-icon">üìñ</div>
			                    PCIe 6.x Register Reference
			                </div>
			            </div>
			            <div style="padding: 20px;">
			                <div class="info-box" style="margin-bottom: 15px;">
			                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--primary-red);">Common Register Offsets</div>
			                    <table style="width: 100%; font-size: 13px;">
			                        <tr>
			                            <td style="padding: 6px 0; font-family: monospace; color: var(--primary-red);">0x00</td>
			                            <td style="padding: 6px 0;">Port Status & Control</td>
			                        </tr>
			                        <tr>
			                            <td style="padding: 6px 0; font-family: monospace; color: var(--primary-red);">0x10</td>
			                            <td style="padding: 6px 0;">Link Control Register</td>
			                        </tr>
			                        <tr>
			                            <td style="padding: 6px 0; font-family: monospace; color: var(--primary-red);">0x20</td>
			                            <td style="padding: 6px 0;">Link Training Status</td>
			                        </tr>
			                        <tr>
			                            <td style="padding: 6px 0; font-family: monospace; color: var(--primary-red);">0x30</td>
			                            <td style="padding: 6px 0;">Port Configuration</td>
			                        </tr>
			                        <tr>
			                            <td style="padding: 6px 0; font-family: monospace; color: var(--primary-red);">0x40</td>
			                            <td style="padding: 6px 0;">Error Status Register</td>
			                        </tr>
			                    </table>
			                </div>

			                <div class="info-box" style="margin-bottom: 15px;">
			                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--primary-red);">Address Ranges</div>
			                    <div style="font-size: 13px; line-height: 1.8;">
			                        <div><strong>Base Address:</strong> 0x60800000</div>
			                        <div><strong>Port Offset:</strong> 0x8000 √ó 2 per port</div>
			                        <div><strong>Valid Range:</strong> 0x60800000 - 0x609FFFFC</div>
			                        <div><strong>Max Ports:</strong> 144 (0-144)</div>
			                    </div>
			                </div>

			                <div class="info-box">
			                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--primary-red);">Usage Examples</div>
			                    <div style="font-size: 13px; font-family: monospace; line-height: 2;">
			                        <div style="background: rgba(0,0,0,0.05); padding: 8px; border-radius: 5px; margin-bottom: 5px;">
			                            mr 0x60800000
			                        </div>
			                        <div style="background: rgba(0,0,0,0.05); padding: 8px; border-radius: 5px; margin-bottom: 5px;">
			                            mw 0x60800000 0xFFFFFFFF
			                        </div>
			                        <div style="background: rgba(0,0,0,0.05); padding: 8px; border-radius: 5px; margin-bottom: 5px;">
			                            dr 0x60800000 20
			                        </div>
			                        <div style="background: rgba(0,0,0,0.05); padding: 8px; border-radius: 5px;">
			                            dp 32
			                        </div>
			                    </div>
			                </div>
			            </div>
			        </div>
			    </div>

			    <!-- Register Value Parser Card -->
			    <div class="card" style="margin-top: 20px;">
			        <div class="card-header">
			            <div class="card-title">
			                <div class="card-icon">üîç</div>
			                Register Value Decoder
			            </div>
			        </div>
			        <div style="padding: 20px;">
			            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
			                <div>
			                    <label class="form-label">Hex Value</label>
			                    <input type="text" id="regHexValue" class="form-control" placeholder="0x00000000" pattern="0x[0-9A-Fa-f]{1,8}">
			                </div>
			                <div>
			                    <label class="form-label">Decimal Value</label>
			                    <input type="text" id="regDecValue" class="form-control" placeholder="0" readonly>
			                </div>
			            </div>
			            <div style="margin-top: 15px;">
			                <label class="form-label">Binary Representation</label>
			                <input type="text" id="regBinValue" class="form-control" style="font-family: monospace; font-size: 12px;" readonly>
			            </div>
			            <div style="margin-top: 15px; font-size: 13px; color: #6b7280;">
			                Enter a hex value to see decimal and binary representations
			            </div>
			        </div>
			    </div>
			</div>

			<script>
			    // Update base address display when port changes
			    document.addEventListener('DOMContentLoaded', () => {
			        const portSelector = document.getElementById('regPortNumber');
			        const baseAddrDisplay = document.getElementById('regBaseAddress');

			        if (portSelector && baseAddrDisplay) {
			            portSelector.addEventListener('change', () => {
			                const port = parseInt(portSelector.value);
			                const baseAddr = 0x60800000 + (port * 0x8000 * 2);
			                baseAddrDisplay.textContent = `0x${baseAddr.toString(16).toUpperCase()}`;
			            });
			        }

			        // Register value decoder
			        const hexInput = document.getElementById('regHexValue');
			        const decInput = document.getElementById('regDecValue');
			        const binInput = document.getElementById('regBinValue');

			        if (hexInput && decInput && binInput) {
			            hexInput.addEventListener('input', (e) => {
			                let value = e.target.value.replace(/[^0-9A-Fa-fx]/g, '');
			                if (!value.startsWith('0x')) {
			                    value = '0x' + value.replace('0x', '');
			                }
			                e.target.value = value;

			                try {
			                    const num = parseInt(value, 16);
			                    if (!isNaN(num)) {
			                        decInput.value = num;
			                        binInput.value = num.toString(2).padStart(32, '0').match(/.{1,4}/g).join(' ');
			                    }
			                } catch (err) {
			                    decInput.value = '';
			                    binInput.value = '';
			                }
			            });
			        }
			    });
			</script>

            <!-- Advanced Dashboard -->
            			<div id="advanced-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">Advanced Diagnostics</h2>
                            <p class="dashboard-subtitle">PCIe clock modes (SRIS/SRNS) and flit mode configuration</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="refreshAdvanced">
                                <span>üîÑ</span> Refresh Status
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Current SSC Mode Display -->
                <div class="current-mode-display">
                    <div class="current-mode-label">Current SSC Clock Mode</div>
                    <div class="current-mode-value" id="currentSSCMode">--</div>
                </div>

                <!-- Clock Control Section -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">üîå</div>
                            Clock Output Control (REFCLK)
                        </div>
                    </div>

                    <div class="advanced-info-box">
                        <div class="advanced-info-title">
                            <span>‚ÑπÔ∏è</span>
                            <span>REFCLK Configuration</span>
                        </div>
                        <div class="advanced-info-content">
                            Control the reference clock outputs for each PCIe interface. Enable clock output for active connections
                            or disable to reduce EMI and power consumption on unused ports.
                            <ul>
                                <li><strong>MCIO Left:</strong> Upper/Lower Left MCIO connectors (Ports 112-127)</li>
                                <li><strong>MCIO Right:</strong> Upper/Lower Right MCIO connectors (Ports 128-143)</li>
                                <li><strong>Straddle Mount:</strong> PCIe straddle mount connector (Ports 80-95)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="clock-control-grid">
                        <!-- MCIO Left Clock Control -->
                        <div class="clock-control-card" id="clockLeftCard">
                            <div class="clock-card-header">
                                <div class="clock-card-title">
                                    <div class="clock-icon">üìç</div>
                                    <div>
                                        <div class="clock-title-text">MCIO Left</div>
                                        <div style="font-size: 11px; color: var(--secondary-gray); font-weight: 500;">Ports 112-127</div>
                                    </div>
                                </div>
                                <div class="clock-status-dot"></div>
                            </div>
                            <div class="clock-card-body">
                                <div class="clock-current-status">
                                    <span class="clock-status-label">Status</span>
                                    <span class="clock-status-text">--</span>
                                </div>
                                <div class="clock-control-buttons">
                                    <button class="clock-control-btn enable-btn" data-location="left" data-state="enable">
                                        <span>‚úì</span> Enable
                                    </button>
                                    <button class="clock-control-btn disable-btn" data-location="left" data-state="disable">
                                        <span>‚úï</span> Disable
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- MCIO Right Clock Control -->
                        <div class="clock-control-card" id="clockRightCard">
                            <div class="clock-card-header">
                                <div class="clock-card-title">
                                    <div class="clock-icon">üìç</div>
                                    <div>
                                        <div class="clock-title-text">MCIO Right</div>
                                        <div style="font-size: 11px; color: var(--secondary-gray); font-weight: 500;">Ports 128-143</div>
                                    </div>
                                </div>
                                <div class="clock-status-dot"></div>
                            </div>
                            <div class="clock-card-body">
                                <div class="clock-current-status">
                                    <span class="clock-status-label">Status</span>
                                    <span class="clock-status-text">--</span>
                                </div>
                                <div class="clock-control-buttons">
                                    <button class="clock-control-btn enable-btn" data-location="right" data-state="enable">
                                        <span>‚úì</span> Enable
                                    </button>
                                    <button class="clock-control-btn disable-btn" data-location="right" data-state="disable">
                                        <span>‚úï</span> Disable
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Straddle Clock Control -->
                        <div class="clock-control-card" id="clockStraddleCard">
                            <div class="clock-card-header">
                                <div class="clock-card-title">
                                    <div class="clock-icon">üîÄ</div>
                                    <div>
                                        <div class="clock-title-text">Straddle Mount</div>
                                        <div style="font-size: 11px; color: var(--secondary-gray); font-weight: 500;">Ports 80-95</div>
                                    </div>
                                </div>
                                <div class="clock-status-dot"></div>
                            </div>
                            <div class="clock-card-body">
                                <div class="clock-current-status">
                                    <span class="clock-status-label">Status</span>
                                    <span class="clock-status-text">--</span>
                                </div>
                                <div class="clock-control-buttons">
                                    <button class="clock-control-btn enable-btn" data-location="straddle" data-state="enable">
                                        <span>‚úì</span> Enable
                                    </button>
                                    <button class="clock-control-btn disable-btn" data-location="straddle" data-state="disable">
                                        <span>‚úï</span> Disable
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SSC Mode Section -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">üì°</div>
                            SSC (Spread Spectrum Clocking) Mode
                        </div>
                    </div>

                    <div class="advanced-info-box">
                        <div class="advanced-info-title">
                            <span>‚ÑπÔ∏è</span>
                            <span>PCIe SRIS/SRNS Configuration</span>
                        </div>
                        <div class="advanced-info-content">
                            Configure Spread Spectrum Clocking for PCIe Gen6 operation. Select the appropriate mode based on your system requirements:
                            <ul>
                                <li><strong>SRISE5 (0.5%):</strong> Standard spread for Gen5/Gen6 with SRIS (Separate Reference Independent SSC)</li>
                                <li><strong>SRISE2 (0.25%):</strong> Reduced spread for compatibility mode or Gen4 and below</li>
                                <li><strong>SRISD (Disabled):</strong> No spreading - SRNS (Separate Reference with No SSC) mode</li>
                            </ul>
                        </div>
                    </div>

                    <div class="ssc-mode-grid">
                        <!-- SRISE5 Mode Card -->
                        <div class="ssc-mode-card" id="srise5Card">
                            <div class="ssc-mode-header">
                                <div>
                                    <div class="ssc-mode-name">SRISE5</div>
                                    <div class="ssc-mode-value">0.5% Spread</div>
                                </div>
                                <span class="ssc-mode-indicator inactive">Inactive</span>
                            </div>
                            <div class="ssc-mode-description">
                                Standard spread spectrum mode for PCIe Gen5 and Gen6 operations with SRIS (Separate Reference Independent SSC).
                            </div>
                            <div class="ssc-mode-specs">
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Spread:</span>
                                    <span class="ssc-spec-value">¬±0.5%</span>
                                </div>
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Mode:</span>
                                    <span class="ssc-spec-value">SRIS</span>
                                </div>
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Gen Support:</span>
                                    <span class="ssc-spec-value">Gen5/Gen6</span>
                                </div>
                            </div>
                            <button class="ssc-mode-btn" data-mode="srise5">
                                <span>‚ö°</span> Activate SRISE5
                            </button>
                        </div>

                        <!-- SRISE2 Mode Card -->
                        <div class="ssc-mode-card" id="srise2Card">
                            <div class="ssc-mode-header">
                                <div>
                                    <div class="ssc-mode-name">SRISE2</div>
                                    <div class="ssc-mode-value">0.25% Spread</div>
                                </div>
                                <span class="ssc-mode-indicator inactive">Inactive</span>
                            </div>
                            <div class="ssc-mode-description">
                                Reduced spread spectrum mode for compatibility with Gen4 and below or systems requiring lower EMI spreading.
                            </div>
                            <div class="ssc-mode-specs">
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Spread:</span>
                                    <span class="ssc-spec-value">¬±0.25%</span>
                                </div>
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Mode:</span>
                                    <span class="ssc-spec-value">SRIS</span>
                                </div>
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Gen Support:</span>
                                    <span class="ssc-spec-value">Gen1-Gen4</span>
                                </div>
                            </div>
                            <button class="ssc-mode-btn" data-mode="srise2">
                                <span>‚ö°</span> Activate SRISE2
                            </button>
                        </div>

                        <!-- SRISD Mode Card -->
                        <div class="ssc-mode-card" id="srisdCard">
                            <div class="ssc-mode-header">
                                <div>
                                    <div class="ssc-mode-name">SRISD</div>
                                    <div class="ssc-mode-value">No Spread</div>
                                </div>
                                <span class="ssc-mode-indicator inactive">Inactive</span>
                            </div>
                            <div class="ssc-mode-description">
                                SRNS (Separate Reference with No SSC) mode - disables spread spectrum clocking entirely.
                            </div>
                            <div class="ssc-mode-specs">
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Spread:</span>
                                    <span class="ssc-spec-value">0%</span>
                                </div>
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Mode:</span>
                                    <span class="ssc-spec-value">SRNS</span>
                                </div>
                                <div class="ssc-spec-item">
                                    <span class="ssc-spec-label">Gen Support:</span>
                                    <span class="ssc-spec-value">All Gen</span>
                                </div>
                            </div>
                            <button class="ssc-mode-btn" data-mode="srisd">
                                <span>‚ö°</span> Activate SRISD
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Flit Mode Section -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">‚ö°</div>
                            Flit Mode Configuration
                        </div>
                    </div>

                    <div class="advanced-info-box">
                        <div class="advanced-info-title">
                            <span>‚ÑπÔ∏è</span>
                            <span>PCIe 6.1 Flit Mode</span>
                        </div>
                        <div class="advanced-info-content">
                            Enable or disable Flit Mode per port group. Flit Mode is required for PCIe Gen6 operation (64 GT/s).
                            <ul>
                                <li><strong>Flit Mode Enabled:</strong> Uses 256-byte FLow control unITs for Gen6 operation</li>
                                <li><strong>Flit Mode Disabled:</strong> Uses traditional TLP format for Gen5 and below</li>
                                <li><strong>Note:</strong> Both link partners must agree on Flit Mode capability</li>
                            </ul>
                        </div>
                    </div>

                    <div class="flit-mode-grid">
                        <!-- Gold Finger Ports -->
                        <div class="flit-mode-card" id="flitPort32Card">
                            <div class="flit-card-header">
                                <div class="flit-card-title">
                                    <div class="flit-icon">üéØ</div>
                                    <div>
                                        <div class="flit-title-text">Gold Finger Ports</div>
                                        <div class="flit-subtitle">Ports 1-32 (Host Connection)</div>
                                    </div>
                                </div>
                                <div class="flit-status-dot"></div>
                            </div>
                            <div class="flit-card-body">
                                <div class="flit-current-status">
                                    <span class="clock-status-label">Flit Mode</span>
                                    <span class="flit-mode-indicator">--</span>
                                </div>
                                <div class="flit-toggle-buttons">
                                    <button class="flit-toggle-btn enable-btn" data-port-group="32" data-state="en">
                                        <span>‚úì</span> Enable
                                    </button>
                                    <button class="flit-toggle-btn disable-btn" data-port-group="32" data-state="dis">
                                        <span>‚úï</span> Disable
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Straddle Mount Ports -->
                        <div class="flit-mode-card" id="flitPort80Card">
                            <div class="flit-card-header">
                                <div class="flit-card-title">
                                    <div class="flit-icon">üîÄ</div>
                                    <div>
                                        <div class="flit-title-text">Straddle Mount</div>
                                        <div class="flit-subtitle">Ports 80-95</div>
                                    </div>
                                </div>
                                <div class="flit-status-dot"></div>
                            </div>
                            <div class="flit-card-body">
                                <div class="flit-current-status">
                                    <span class="clock-status-label">Flit Mode</span>
                                    <span class="flit-mode-indicator">--</span>
                                </div>
                                <div class="flit-toggle-buttons">
                                    <button class="flit-toggle-btn enable-btn" data-port-group="80" data-state="en">
                                        <span>‚úì</span> Enable
                                    </button>
                                    <button class="flit-toggle-btn disable-btn" data-port-group="80" data-state="dis">
                                        <span>‚úï</span> Disable
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Left MCIO -->
                        <div class="flit-mode-card" id="flitPort112Card">
                            <div class="flit-card-header">
                                <div class="flit-card-title">
                                    <div class="flit-icon">üìç</div>
                                    <div>
                                        <div class="flit-title-text">Left MCIO</div>
                                        <div class="flit-subtitle">Ports 112-127</div>
                                    </div>
                                </div>
                                <div class="flit-status-dot"></div>
                            </div>
                            <div class="flit-card-body">
                                <div class="flit-current-status">
                                    <span class="clock-status-label">Flit Mode</span>
                                    <span class="flit-mode-indicator">--</span>
                                </div>
                                <div class="flit-toggle-buttons">
                                    <button class="flit-toggle-btn enable-btn" data-port-group="112" data-state="en">
                                        <span>‚úì</span> Enable
                                    </button>
                                    <button class="flit-toggle-btn disable-btn" data-port-group="112" data-state="dis">
                                        <span>‚úï</span> Disable
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Right MCIO -->
                        <div class="flit-mode-card" id="flitPort128Card">
                            <div class="flit-card-header">
                                <div class="flit-card-title">
                                    <div class="flit-icon">üìç</div>
                                    <div>
                                        <div class="flit-title-text">Right MCIO</div>
                                        <div class="flit-subtitle">Ports 128-143</div>
                                    </div>
                                </div>
                                <div class="flit-status-dot"></div>
                            </div>
                            <div class="flit-card-body">
                                <div class="flit-current-status">
                                    <span class="clock-status-label">Flit Mode</span>
                                    <span class="flit-mode-indicator">--</span>
                                </div>
                                <div class="flit-toggle-buttons">
                                    <button class="flit-toggle-btn enable-btn" data-port-group="128" data-state="en">
                                        <span>‚úì</span> Enable
                                    </button>
                                    <button class="flit-toggle-btn disable-btn" data-port-group="128" data-state="dis">
                                        <span>‚úï</span> Disable
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Command History -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">üìã</div>
                            Command History
                        </div>
                        <button class="btn btn-sm btn-outline" id="clearAdvancedHistory">
                            <span>üóëÔ∏è</span> Clear History
                        </button>
                    </div>
                    <div class="advanced-history-container" id="advancedHistoryContainer">
                        <div class="advanced-history-entry system">
                            <div class="advanced-history-timestamp">System Ready</div>
                            <div class="advanced-history-content">Advanced settings dashboard initialized.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Errors Dashboard -->
            <div id="errors-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">PCIe Error Counters</h2>
                            <p class="dashboard-subtitle">Real-time PCIe link training and flit bit rate error monitoring</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="refreshErrors">
                                <span>üîÑ</span> Refresh Counters
                            </button>
                            <button class="btn btn-outline" id="resetErrorCounters">
                                <span>‚Ü∫</span> Reset Counters
                            </button>
                            <button class="btn btn-outline" id="exportErrors">
                                <span>üìÑ</span> Export Report
                            </button>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid errors-dashboard-grid">
                    <!-- Link Training Error Counters -->
                    <div class="card errors-section-card link-errors-card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîó</div>
                                Link Training Error Counters
                            </div>
                            <div class="error-legend">
                                <span class="legend-item">Last Updated: <span id="linkErrorsLastUpdate">Never</span></span>
                            </div>
                        </div>

                        <div class="errors-counter-grid" id="linkErrorsCounterGrid">
                            <div class="loading-state">
                                <div class="loading"></div>
                                <span>Loading error counters...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Flit Bit Rate Error Counters -->
                    <div class="card errors-section-card flit-errors-card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìä</div>
                                Flit Bit Rate Error Counters
                            </div>
                            <div class="error-legend">
                                <span class="legend-item">Last Updated: <span id="flitErrorsLastUpdate">Never</span></span>
                            </div>
                        </div>

                        <div class="errors-counter-grid" id="flitErrorsCounterGrid">
                            <div class="loading-state">
                                <div class="loading"></div>
                                <span>Loading flit error counters...</span>
                            </div>
                        </div>
                    </div>

                    <!-- PCIe 6.1 Specification Reference -->
                    <div class="card spec-reference-card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìñ</div>
                                PCIe 6.1 Error Types & Common Causes
                            </div>
                        </div>
                        <div class="spec-reference-content">
                            <div class="spec-item">
                                <strong>PortRx (Port Receive Errors)</strong>
                                <div class="spec-description">Physical layer errors during data reception (PCIe 6.1 Spec ¬ß4.2.6)</div>
                                <div class="spec-causes">
                                    <strong>Common Causes:</strong>
                                    <ul>
                                        <li>Poor signal integrity or excessive noise</li>
                                        <li>Cable quality issues or improper termination</li>
                                        <li>Clock skew or jitter problems</li>
                                        <li>Electromagnetic interference (EMI)</li>
                                        <li>Marginal voltage levels or power supply issues</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="spec-item">
                                <strong>BadTLP (Bad Transaction Layer Packet)</strong>
                                <div class="spec-description">Malformed or corrupted TLPs (PCIe 6.1 Spec ¬ß2.5.1)</div>
                                <div class="spec-causes">
                                    <strong>Common Causes:</strong>
                                    <ul>
                                        <li>ECRC (End-to-End CRC) validation failures</li>
                                        <li>LCRC (Link CRC) errors not caught at lower layers</li>
                                        <li>Malformed packet headers or invalid formatting</li>
                                        <li>Buffer overflow or underflow in transaction layer</li>
                                        <li>Firmware bugs in TLP generation logic</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="spec-item">
                                <strong>BadDLLP (Bad Data Link Layer Packet)</strong>
                                <div class="spec-description">Invalid DLLPs or CRC errors (PCIe 6.1 Spec ¬ß3.4.1)</div>
                                <div class="spec-causes">
                                    <strong>Common Causes:</strong>
                                    <ul>
                                        <li>CRC check failures on DLLPs (ACK/NAK packets)</li>
                                        <li>Invalid DLLP type or format errors</li>
                                        <li>Sequence number mismatches</li>
                                        <li>Link training state machine errors</li>
                                        <li>Physical layer bit errors propagating to DLLP</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="spec-item">
                                <strong>RecDiag (Receiver Diagnostic Errors)</strong>
                                <div class="spec-description">Link training and equalization failures (PCIe 6.1 Spec ¬ß4.2.3)</div>
                                <div class="spec-causes">
                                    <strong>Common Causes:</strong>
                                    <ul>
                                        <li>Equalization failures during link training</li>
                                        <li>Preset or coefficient optimization failures</li>
                                        <li>Receiver detection timeouts</li>
                                        <li>Eye diagram margin violations</li>
                                        <li>Lane-to-lane skew beyond tolerance</li>
                                        <li>Speed negotiation failures (Gen 1/2/3/4/5/6)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Tooltip Template (Hidden, used by JavaScript) -->
            <div id="errorTooltipTemplate" style="display: none;">
                <div class="error-tooltip">
                    <div class="tooltip-title"></div>
                    <div class="tooltip-spec"></div>
                    <div class="tooltip-causes"></div>
                </div>
            </div>

            <!-- Resets Dashboard -->
            <div id="resets-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div>
                        <h2 class="dashboard-title">System Resets</h2>
                        <p class="dashboard-subtitle">Hardware reset controls and recovery operations</p>
                    </div>
                </div>

                <!-- Warning Banner -->
                <div class="reset-warning-banner">
                    <div class="warning-icon">‚ö†Ô∏è</div>
                    <div class="warning-content">
                        <div class="warning-title">Caution: System Reset Operations</div>
                        <div class="warning-text">
                            Reset operations will interrupt device operation and may cause temporary disconnection.
                            Please ensure no critical operations are in progress before proceeding.
                        </div>
                    </div>
                </div>

                <!-- Reset Control Grid -->
                <div class="reset-control-grid">
                    <!-- PCIe Straddle Mount Reset -->
                    <div class="reset-control-card">
                        <div class="reset-card-header">
                            <div class="reset-icon pcie">üîå</div>
                            <div class="reset-card-title">
                                <h3>PCIe Straddle Mount Reset</h3>
                                <p>Reset the PCIe Straddle Mount Connector</p>
                            </div>
                        </div>
                        <div class="reset-card-body">
                            <ul class="reset-description">
                                <li>Resets the PCIe straddle mount connector</li>
                                <li>Reinitializes the connection interface</li>
                                <li>Does not affect other system components</li>
                            </ul>
                            <div class="reset-command-display">
                                <span class="command-label">Command:</span>
                                <code>mrst</code>
                            </div>
                        </div>
                        <div class="reset-card-footer">
                            <button class="btn btn-reset btn-pcie" data-reset-cmd="mrst" data-reset-type="PCIe Straddle Mount">
                                <span class="btn-icon">üîÑ</span>
                                <span class="btn-text">Execute PCIe Reset</span>
                            </button>
                        </div>
                    </div>

                    <!-- Atlas 3 Switch Reset -->
                    <div class="reset-control-card">
                        <div class="reset-card-header">
                            <div class="reset-icon switch">üîÄ</div>
                            <div class="reset-card-title">
                                <h3>Atlas 3 Switch Reset</h3>
                                <p>Reset the Atlas 3 PCIe Switch</p>
                            </div>
                        </div>
                        <div class="reset-card-body">
                            <ul class="reset-description">
                                <li>Performs a software reset of the Atlas 3 switch</li>
                                <li>Clears switch state and error conditions</li>
                                <li>Reinitializes PCIe routing configuration</li>
                            </ul>
                            <div class="reset-command-display">
                                <span class="command-label">Command:</span>
                                <code>swreset</code>
                            </div>
                        </div>
                        <div class="reset-card-footer">
                            <button class="btn btn-reset btn-switch" data-reset-cmd="swreset" data-reset-type="Atlas 3 Switch">
                                <span class="btn-icon">üîÑ</span>
                                <span class="btn-text">Execute Switch Reset</span>
                            </button>
                        </div>
                    </div>

                    <!-- Full System Reset -->
                    <div class="reset-control-card critical">
                        <div class="reset-card-header">
                            <div class="reset-icon system">‚ö°</div>
                            <div class="reset-card-title">
                                <h3>Full System Reset</h3>
                                <p>Complete hardware system reset</p>
                            </div>
                        </div>
                        <div class="reset-card-body">
                            <ul class="reset-description">
                                <li>Performs a complete hardware system reset</li>
                                <li>Resets all components and subsystems</li>
                                <li>Requires CalypsoPy+ reconnection</li>
                            </ul>
                            <div class="reset-command-display critical">
                                <span class="command-label">Command:</span>
                                <code>reset</code>
                            </div>
                        </div>
                        <div class="reset-card-footer">
                            <button class="btn btn-reset btn-critical" data-reset-cmd="reset" data-reset-type="Full System">
                                <span class="btn-icon">‚ö°</span>
                                <span class="btn-text">Execute System Reset</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Reset History Log -->
                <div class="card reset-history-card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">üìã</div>
                            Reset History
                        </div>
                        <button class="btn btn-sm btn-outline" id="clearResetHistory">
                            <span>üóëÔ∏è</span> Clear History
                        </button>
                    </div>
                    <div class="reset-history-container" id="resetHistoryContainer">
                        <div class="reset-history-entry system">
                            <div class="reset-history-timestamp">System Ready</div>
                            <div class="reset-history-content">Reset controls initialized. Ready to execute reset operations.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Confirmation Modal -->
            <div id="resetConfirmationModal" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-icon">‚ö†Ô∏è</div>
                        <h3 class="modal-title">Confirm Reset Operation</h3>
                    </div>
                    <div class="modal-body">
                        <p class="modal-message" id="resetConfirmMessage">
                            Are you sure you want to execute this reset operation?
                        </p>
                        <div class="modal-warning">
                            <strong>Warning:</strong> This action cannot be undone and may temporarily interrupt device operation.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="cancelResetBtn">
                            <span>‚úï</span> Cancel
                        </button>
                        <button class="btn btn-primary" id="confirmResetBtn">
                            <span>‚úì</span> Confirm Reset
                        </button>
                    </div>
                </div>
            </div>

            <!-- Restart Required Modal -->
            <div id="restartRequiredModal" class="modal-overlay">
                <div class="modal-container">
                    <div class="modal-header">
                        <div class="modal-icon restart">üîÑ</div>
                        <h3 class="modal-title">Restart Required</h3>
                    </div>
                    <div class="modal-body">
                        <p class="modal-message">
                            The reset operation has been completed successfully. CalypsoPy+ needs to restart to re-establish the connection with your device.
                        </p>
                        <div class="modal-info">
                            <strong>Note:</strong> You will need to reconnect to your device after the restart.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="restartLaterBtn">
                            <span>‚è∏Ô∏è</span> Restart Later
                        </button>
                        <button class="btn btn-primary" id="restartNowBtn">
                            <span>üîÑ</span> Restart Now
                        </button>
                    </div>
                </div>
            </div>

            <!-- Firmware Dashboard -->
            <div id="firmware-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">Firmware Updates</h2>
                            <p class="dashboard-subtitle">Update device firmware via XMODEM protocol</p>
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-outline" id="checkFirmwareVersion">
                                <span>üìã</span> Check Version
                            </button>
                            <button class="btn btn-outline" id="clearFirmwareLog">
                                <span>üóëÔ∏è</span> Clear Log
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Firmware Status Cards -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="currentFwVersion">--</div>
                        <div class="metric-label">Current Version</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="mcuStatus">--</div>
                        <div class="metric-label">MCU Status</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="sbr0Status">--</div>
                        <div class="metric-label">SBR0 Status</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="sbr1Status">--</div>
                        <div class="metric-label">SBR1 Status</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- MCU Firmware Update Card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üíæ</div>
                                mCPU Firmware Update
                            </div>
                            <div class="mcu-update-status" id="mcuUpdateStatus">
                                <span class="status-indicator" id="mcuStatusIndicator">Ready</span>
                            </div>
                        </div>

                        <div class="firmware-update-section">
                            <div class="firmware-info-box">
                                <div class="info-row">
                                    <span class="info-label">Target:</span>
                                    <span class="info-value">mCPU (MCU)</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Command:</span>
                                    <span class="info-value mono">fdl mcu</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Protocol:</span>
                                    <span class="info-value">XMODEM-1K</span>
                                </div>
                            </div>

                            <div class="file-upload-zone" id="mcuDropZone">
                                <input type="file" id="mcuFileInput" accept=".bin,.hex,.fw" style="display: none;">
                                <div class="upload-icon">üìÅ</div>
                                <div class="upload-text">
                                    <strong>Drop MCU firmware file here</strong><br>
                                    <span class="upload-subtext">or click to browse</span>
                                </div>
                                <div class="supported-formats">Supported: .bin</div>
                            </div>

                            <div class="selected-file" id="mcuSelectedFile" style="display: none;">
                                <div class="file-icon">üìÑ</div>
                                <div class="file-details">
                                    <div class="file-name" id="mcuFileName">--</div>
                                    <div class="file-size" id="mcuFileSize">--</div>
                                </div>
                                <button class="btn btn-sm btn-outline" id="mcuRemoveFile">
                                    <span>‚úï</span>
                                </button>
                            </div>

                            <div class="update-controls">
                                <button class="btn btn-primary" id="startMcuUpdate" disabled>
                                    <span>‚¨ÜÔ∏è</span> Start MCU Update
                                </button>
                                <button class="btn btn-secondary" id="cancelMcuUpdate" style="display: none;">
                                    <span>‚úï</span> Cancel
                                </button>
                            </div>

                            <div class="progress-container" id="mcuProgress" style="display: none;">
                                <div class="progress-label">
                                    <span>Uploading MCU Firmware</span>
                                    <span id="mcuProgressPercent">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="mcuProgressBar" style="width: 0%"></div>
                                </div>
                                <div class="progress-stats">
                                    <span id="mcuBytesTransferred">0 B / 0 B</span>
                                    <span id="mcuTimeRemaining">--</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Switch (SBR) Firmware Update Card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üîÄ</div>
                                Atlas3 Switch Update
                            </div>
                            <div class="sbr-update-status" id="sbrUpdateStatus">
                                <span class="status-indicator" id="sbrStatusIndicator">Ready</span>
                            </div>
                        </div>

                        <div class="firmware-update-section">
                            <div class="firmware-info-box">
                                <div class="info-row">
                                    <span class="info-label">Target:</span>
                                    <span class="info-value">Atlas 3 Switch</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Commands:</span>
                                    <span class="info-value mono">fdl sbr0 + fdl sbr1</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Protocol:</span>
                                    <span class="info-value">XMODEM-1K (Dual Transfer)</span>
                                </div>
                            </div>

                            <div class="file-upload-zone" id="sbrDropZone">
                                <input type="file" id="sbrFileInput" accept=".bin,.hex,.fw" style="display: none;">
                                <div class="upload-icon">üìÅ</div>
                                <div class="upload-text">
                                    <strong>Drop SBR firmware file here</strong><br>
                                    <span class="upload-subtext">or click to browse</span>
                                </div>
                                <div class="supported-formats">Supported: .bin, .fw</div>
                            </div>

                            <div class="selected-file" id="sbrSelectedFile" style="display: none;">
                                <div class="file-icon">üìÑ</div>
                                <div class="file-details">
                                    <div class="file-name" id="sbrFileName">--</div>
                                    <div class="file-size" id="sbrFileSize">--</div>
                                </div>
                                <button class="btn btn-sm btn-outline" id="sbrRemoveFile">
                                    <span>‚úï</span>
                                </button>
                            </div>

                            <div class="update-controls">
                                <button class="btn btn-primary" id="startSbrUpdate" disabled>
                                    <span>‚¨ÜÔ∏è</span> Start SBR Update (Both Halves)
                                </button>
                                <button class="btn btn-secondary" id="cancelSbrUpdate" style="display: none;">
                                    <span>‚úï</span> Cancel
                                </button>
                            </div>

                            <div class="progress-container" id="sbrProgress" style="display: none;">
                                <div class="progress-label">
                                    <span id="sbrProgressLabel">Uploading SBR0 Firmware</span>
                                    <span id="sbrProgressPercent">0%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="sbrProgressBar" style="width: 0%"></div>
                                </div>
                                <div class="progress-stats">
                                    <span id="sbrBytesTransferred">0 B / 0 B</span>
                                    <span id="sbrTimeRemaining">--</span>
                                </div>
                                <div class="sbr-dual-status">
                                    <div class="sbr-half-status">
                                        <span class="sbr-half-label">SBR0:</span>
                                        <span class="sbr-half-indicator" id="sbr0Indicator">Pending</span>
                                    </div>
                                    <div class="sbr-half-status">
                                        <span class="sbr-half-label">SBR1:</span>
                                        <span class="sbr-half-indicator" id="sbr1Indicator">Pending</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Firmware Update Log -->
                    <div class="card command-interface">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìú</div>
                                Firmware Update Log
                            </div>
                            <div class="card-actions">
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--secondary-gray);">
                                    <input type="checkbox" id="autoScrollLog" checked> Auto-scroll
                                </label>
                            </div>
                        </div>

                        <div class="console-container" id="firmwareConsole" style="height: 500px;">
                            <div class="console-entry system">
                                <div class="console-timestamp">System Ready</div>
                                <div class="console-content">Firmware update system initialized. Select a firmware file to begin update process.</div>
                            </div>
                        </div>

                        <div class="firmware-warnings">
                            <div class="warning-box">
                                <div class="warning-icon">‚ö†Ô∏è</div>
                                <div class="warning-content">
                                    <strong>Important:</strong> Do not disconnect the device or interrupt power during firmware updates.
                                    Ensure you have the correct firmware file for your device model.
                                    SBR updates will automatically update both halves sequentially.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Testing Dashboard -->
			<div id="testing-dashboard" class="dashboard-content">
			    <div class="dashboard-header">
			        <div style="display: flex; justify-content: space-between; align-items: flex-end;">
			            <div>
			                <h2 class="dashboard-title">PCIe/NVMe Testing</h2>
			                <p class="dashboard-subtitle">Atlas 3 validation and NVMe device testing</p>
			            </div>
			            <div style="display: flex; gap: 15px;">
			                <button class="btn btn-primary" id="runAllTests">
			                    <span>‚ñ∂Ô∏è</span> Run All Tests
			                </button>
			                <button class="btn btn-outline" id="exportTestResults">
			                    <span>üìÑ</span> Export Results
			                </button>
			                <button class="btn btn-outline" id="clearTestHistory">
			                    <span>üóëÔ∏è</span> Clear History
			                </button>
			            </div>
			        </div>
			    </div>

			    <!-- Permission Notice -->
			    <div class="info-banner">
			        <div class="info-icon">‚ÑπÔ∏è</div>
			        <div class="info-content">
			            <strong>Testing Requirements:</strong>
			            Some tests require sudo/root permissions for full functionality.
			            Tests will run with available permissions and note any limitations.
                    </div>
                    <div>
                        <strong>Required Utilities on Host Server:</strong>
                        <ul>
                            <li><code>pciutils</code> for inspecting and manipulating PCI device configurations: <code>sudo apt install pciutils</code></li>
                            <li><code>nvme-cli</code> for comprehensive NVMe testing: <code>sudo apt install nvme-cli</code></li>
                            <li><code>fio</code> for NVMe benchmarking: <code>sudo apt install fio</code></li>
                        </ul>
			        </div>
			    </div>

			    <!-- Test Suite Cards -->
				<div class="test-grid">
				    <!-- DEFAULT TESTS (Always visible) -->
				    <!-- PCIe Discovery Test -->
				    <div class="card test-card" data-test-id="pcie_discovery" data-default="true">
				        <div class="card-header test-card-header">
				            <div class="card-title">
				                <div class="card-icon">üîç</div>
				                <span>PCIe Discovery</span>
				            </div>
				            <div class="test-card-header-actions">
				                <span class="test-status idle" id="pcie_discoveryStatus">‚è∏Ô∏è Idle</span>
				            </div>
				        </div>

				        <div class="test-card-body">
				            <p class="test-description">
				                Discovers and validates Atlas 3 PCIe switch topology, including root bridge,
				                downstream ports, and connected devices. Verifies Gen6 link speeds and widths.
				            </p>

				            <div class="test-requirements">
				                <h5>Test Validates:</h5>
				                <ul>
				                    <li>PCIe root bridge identification</li>
				                    <li>Downstream port enumeration and configuration</li>
				                    <li>Connected device detection (NVMe, GPU, etc.)</li>
				                    <li>Link speed and width validation (Gen6 x16/x8/x4)</li>
				                    <li>Bus-Device-Function (BDF) address assignment</li>
				                </ul>
				            </div>

				            <div class="test-requirement-note">
				                <strong>Note:</strong> Full topology discovery requires <code>sudo</code> privileges
				            </div>

				            <div class="test-actions">
				                <button class="btn btn-primary btn-test-run" onclick="testingDashboard.runTest('pcie_discovery')">
				                    <span>‚ñ∂Ô∏è</span> Run Test
				                </button>
				            </div>
				        </div>
				    </div>

				    <!-- NVMe Discovery Test -->
				    <div class="card test-card" data-test-id="nvme_discovery" data-default="true">
				        <div class="card-header test-card-header">
				            <div class="card-title">
				                <div class="card-icon">üíæ</div>
				                <span>NVMe Discovery</span>
				            </div>
				            <div class="test-card-header-actions">
				                <span class="test-status idle" id="nvme_discoveryStatus">‚è∏Ô∏è Idle</span>
				            </div>
				        </div>

				        <div class="test-card-body">
				            <p class="test-description">
				                Enumerates all NVMe controllers and namespaces connected through Atlas 3 switch.
				                Collects SMART health data and validates device configuration.
				            </p>

				            <div class="test-requirements">
				                <h5>Test Validates:</h5>
				                <ul>
				                    <li>NVMe controller detection and identification</li>
				                    <li>Namespace enumeration and capacity</li>
				                    <li>SMART health monitoring (temperature, spare, usage)</li>
				                    <li>PCI address mapping to NVMe devices</li>
				                    <li>Critical warning detection</li>
				                </ul>
				            </div>

				            <div class="test-requirement-note">
				                <strong>Note:</strong> Requires <code>nvme-cli</code> for full functionality
				            </div>

				            <div class="test-actions">
				                <button class="btn btn-primary btn-test-run" onclick="testingDashboard.runTest('nvme_discovery')">
				                    <span>‚ñ∂Ô∏è</span> Run Test
				                </button>
				            </div>
				        </div>
				    </div>
				</div>

				<!-- CATEGORY FILTER LINKS -->
				<div class="test-category-filter">
				    <h3 class="category-filter-title">Additional Test Categories</h3>
				    <div class="category-links">
				        <button class="category-link active" data-category="link-quality" onclick="testingDashboard.filterByCategory('link-quality')">
				            <span class="category-icon">üîó</span>
				            <span class="category-name">Link Quality & Training</span>
				        </button>
				        <button class="category-link" data-category="nvme-validation" onclick="testingDashboard.filterByCategory('nvme-validation')">
				            <span class="category-icon">‚úÖ</span>
				            <span class="category-name">NVMe Validation</span>
				        </button>
				        <button class="category-link" data-category="nvme-performance" onclick="testingDashboard.filterByCategory('nvme-performance')">
				            <span class="category-icon">‚ö°</span>
				            <span class="category-name">NVMe Performance</span>
				        </button>
				        <button class="category-link" data-category="nvme-health" onclick="testingDashboard.filterByCategory('nvme-health')">
				            <span class="category-icon">üè•</span>
				            <span class="category-name">NVMe Health & SMART</span>
				        </button>
				        <button class="category-link" data-category="pcie-compliance" onclick="testingDashboard.filterByCategory('pcie-compliance')">
				            <span class="category-icon">üìê</span>
				            <span class="category-name">PCIe Compliance & Validation</span>
				        </button>
				        <button class="category-link" data-category="pcie-6x" onclick="testingDashboard.filterByCategory('pcie-6x')">
				            <span class="category-icon">üöÄ</span>
				            <span class="category-name">PCIe 6.x-Specific Tests</span>
				        </button>
				    </div>
				</div>

						<!-- CATEGORIZED TESTS GRID -->
			<div class="categorized-tests-grid" id="categorizedTestsGrid">
			    <!-- ========================================
			         LINK QUALITY & TRAINING CATEGORY
			         ======================================== -->

			    <!-- Link Training Time Test - COMPLETED TEST -->
			    <div class="card test-card test-card-compact collapsed" data-test-id="link_training_time" data-category="link-quality">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">‚è±Ô∏è</div>
			                <span>Link Training Time</span>
			            </div>
			            <div class="test-card-header-actions">
			                <button class="btn btn-primary btn-test-run-compact" onclick="testingDashboard.runTest('link_training_time')">
			                    <span>‚ñ∂Ô∏è</span> Run
			                </button>
			                <span class="test-status idle" id="link_training_timeStatus">‚è∏Ô∏è Idle</span>
			            </div>
			        </div>

			        <div class="test-card-body">
			            <p class="test-description">
			                Measures PCIe link training times by tracking LTSSM state transitions in kernel dmesg logs.
			                Analyzes link down/up events and calculates training durations for Atlas 3 downstream devices.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>LTSSM state transitions from kernel logs</li>
			                    <li>Link training sequence timing</li>
			                    <li>Link up/down event detection</li>
			                    <li>Speed and width negotiation events</li>
			                    <li>Training errors and retrain events</li>
			                </ul>
			            </div>

			            <div class="test-requirement-note" id="linkTrainingRequirement" style="display: none;">
			                <strong>‚ö†Ô∏è Requirement:</strong> NVMe devices must be detected first. Please run <strong>NVMe Discovery</strong> test to enable this test.
			            </div>

			            <!-- Test Configuration Options -->
			            <div class="test-config-section" id="linkTrainingConfig" style="display: block;">
			                <h5>Test Options</h5>

			                <!-- Device Filtering Info Box -->
			                <div class="info-box" style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 15px;">
			                    <div style="display: flex; align-items: start; gap: 10px;">
			                        <span style="font-size: 20px;">‚ÑπÔ∏è</span>
			                        <div style="font-size: 13px; color: #1e40af;">
			                            <strong>Device Filtering:</strong> This test automatically filters devices to only test <strong>endpoint devices downstream of Atlas 3 switch</strong>.
			                            Bridges, switches, and the Atlas 3 itself are excluded to prevent system instability.
			                        </div>
			                    </div>
			                </div>

			                <div class="config-item">
			                    <label for="linkTrainingDeviceSelect">Target Device</label>
			                    <select id="linkTrainingDeviceSelect" class="form-control">
			                        <option value="">All Atlas 3 Downstream Endpoints</option>
			                    </select>
			                    <span class="config-help">Select specific endpoint device to monitor, or test all downstream devices</span>
			                </div>

			                <!-- Filter Options -->
			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="linkTrainingFilterEndpoints" checked disabled>
			                        Filter Endpoints Only (Required)
			                    </label>
			                    <span class="config-help">Automatically excludes bridges and switches - cannot be disabled for safety</span>
			                </div>

			                <!-- Show Excluded Devices -->
			                <div id="linkTrainingExcludedDevices" style="display: none; margin-top: 10px; padding: 10px; background: #fef3c7; border-radius: 6px; border-left: 4px solid #f59e0b;">
			                    <div style="font-size: 13px; font-weight: 600; color: #92400e; margin-bottom: 5px;">
			                        ‚ö†Ô∏è Excluded Devices
			                    </div>
			                    <div id="linkTrainingExcludedList" style="font-size: 12px; color: #78350f;"></div>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="linkTrainingTriggerReset">
			                        Trigger Device Reset
			                    </label>
			                    <span class="config-help">Perform PCIe device reset before measurement (requires root/sudo)</span>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="linkTrainingTriggerHotplug">
			                        Trigger Hot-Plug Event
			                    </label>
			                    <span class="config-help">Simulate hot-plug to trigger link training (requires root/sudo)</span>
			                </div>
			            </div>

			            <div class="test-actions">
			                <button class="btn btn-primary btn-test-run" id="runLinkTrainingBtn" onclick="testingDashboard.runTest('link_training_time')" disabled>
			                    <span>‚ñ∂Ô∏è</span> Run Test
			                </button>
			            </div>
			        </div>
			    </div>

			    <div class="card test-card test-card-compact collapsed" data-test-id="link_retrain_count" data-category="link-quality">
				    <div class="card-header test-card-header">
				        <div class="card-title">
				            <div class="card-icon">üîÅ</div>
				            <span>Link Retrain Count</span>
				        </div>
				        <div class="test-card-header-actions">
				            <button class="btn btn-primary btn-test-run-compact" onclick="testingDashboard.runTest('link_retrain_count')">
				                <span>‚ñ∂Ô∏è</span> Run
				            </button>
				            <span class="test-status idle" id="link_retrain_countStatus">‚è∏Ô∏è Idle</span>
				        </div>
				    </div>

				    <div class="test-card-body">
				        <p class="test-description">
				            Monitors PCIe Link Control register for retrain attempts on <strong>Atlas 3 downstream endpoint devices only</strong>.
				            Validates compliance with PCIe 6.x specification.
				        </p>

				        <div class="test-requirements">
				            <h5>Test Validates:</h5>
				            <ul>
				                <li>PCIe Link Control register retrain bit operation</li>
				                <li>Link Status register training state tracking</li>
				                <li>Retrain completion timing vs PCIe 6.x limits</li>
				                <li>Link training success/failure rates</li>
				                <li>Specification compliance validation</li>
				            </ul>
				        </div>

                        <div class="test-requirement-note">
                            <strong>Note:</strong> Requires <code>pciutils</code> for full functionality
                        </div>

				        <div class="test-requirement-note" id="linkRetrainRequirement" style="display: none;">
				            <strong>‚ö†Ô∏è Requirement:</strong> Devices must be detected first. Please run <strong>PCIe Discovery</strong> or <strong>NVMe Discovery</strong> test to enable this test.
				        </div>

				        <!-- Test Configuration Options -->
				        <div class="test-config-section" id="linkRetrainConfig" style="display: block;">
				            <h5>Test Options</h5>

				            <!-- Device Filtering Info Box -->
				            <div class="info-box" style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 15px;">
				                <div style="display: flex; align-items: start; gap: 10px;">
				                    <span style="font-size: 20px;">‚ÑπÔ∏è</span>
				                    <div style="font-size: 13px; color: #1e40af;">
				                        <strong>Device Filtering:</strong> This test automatically filters devices to only test <strong>endpoint devices downstream of Atlas 3 switch</strong>.
				                        Bridges, switches, and the Atlas 3 itself are excluded to prevent system instability.
				                    </div>
				                </div>
				            </div>

				            <!-- Device Selection -->
				            <div class="config-item">
				                <label for="linkRetrainDeviceSelect">Target Device(s)</label>
				                <select id="linkRetrainDeviceSelect" class="form-control">
				                    <option value="">All Atlas 3 Downstream Endpoints</option>
				                </select>
				                <span class="config-help">Select specific endpoint device or test all downstream devices</span>
				            </div>

				            <!-- Filter Options -->
				            <div class="config-item">
				                <label>
				                    <input type="checkbox" id="linkRetrainFilterEndpoints" checked disabled>
				                    Filter Endpoints Only (Required)
				                </label>
				                <span class="config-help">Automatically excludes bridges and switches - cannot be disabled for safety</span>
				            </div>

				            <!-- Show Excluded Devices -->
				            <div id="linkRetrainExcludedDevices" style="display: none; margin-top: 10px; padding: 10px; background: #fef3c7; border-radius: 6px; border-left: 4px solid #f59e0b;">
				                <div style="font-size: 13px; font-weight: 600; color: #92400e; margin-bottom: 5px;">
				                    ‚ö†Ô∏è Excluded Devices
				                </div>
				                <div id="linkRetrainExcludedList" style="font-size: 12px; color: #78350f;"></div>
				            </div>

				            <!-- Test Parameters -->
				            <div class="config-item">
				                <label for="linkRetrainNumRetrains">Number of Retrains</label>
				                <input type="number" id="linkRetrainNumRetrains" class="form-control" value="5" min="1" max="20">
				                <span class="config-help">Number of link retrain attempts to perform per device</span>
				            </div>

				            <div class="config-item">
				                <label for="linkRetrainDelay">Delay Between Retrains (ms)</label>
				                <input type="number" id="linkRetrainDelay" class="form-control" value="100" min="50" max="5000" step="50">
				                <span class="config-help">Time to wait between retrain attempts</span>
				            </div>

				            <div class="config-item">
				                <label>
				                    <input type="checkbox" id="linkRetrainShowTiming" checked>
				                    Show Timing Details
				                </label>
				                <span class="config-help">Include detailed timing information in results</span>
				            </div>

				            <div class="config-item">
				                <label>
				                    <input type="checkbox" id="linkRetrainCheckCompliance" checked>
				                    Check PCIe 6.x Compliance
				                </label>
				                <span class="config-help">Validate results against PCIe 6.x specification limits</span>
				            </div>
				        </div>

				        <div class="test-actions">
				            <button class="btn btn-primary btn-test-run" id="runLinkRetrainBtn" onclick="testingDashboard.runTest('link_retrain_count')" disabled>
				                <span>‚ñ∂Ô∏è</span> Run Test
				            </button>
				        </div>
				    </div>
				</div>

			    <!-- PCIe Link Quality Assessment - COMPLETED TEST -->
			    <div class="card test-card test-card-compact collapsed" data-test-id="link_quality" data-category="link-quality">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">üîç</div>
			                <span>PCIe Link Quality Assessment</span>
			            </div>
			            <div class="test-card-header-actions">
			                <button class="btn btn-primary btn-test-run-compact" onclick="testingDashboard.runTest('link_quality')">
			                    <span>‚ñ∂Ô∏è</span> Run
			                </button>
			                <span class="test-status idle" id="link_qualityStatus">‚è∏Ô∏è Idle</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Comprehensive link quality assessment through random resets, comprehensive monitoring, LTSSM tracking, and Atlas 3 error correlation to evaluate PCIe link stability and performance.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Link reset resilience and recovery times</li>
			                    <li>LTSSM state transition patterns</li>
			                    <li>Atlas 3 switch error correlation</li>
			                    <li>System monitoring (dmesg, pciutils, sysfs)</li>
			                    <li>PCIe 6.x compliance under stress</li>
			                    <li>Link quality grading (A-F scale)</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Configuration Options:</h5>

			                <!-- Device Filtering Info Box -->
			                <div class="info-box" style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 15px;">
			                    <div style="display: flex; align-items: start; gap: 10px;">
			                        <span style="font-size: 20px;">‚ÑπÔ∏è</span>
			                        <div style="font-size: 13px; color: #1e40af;">
			                            <strong>Device Filtering:</strong> This test automatically filters devices to only test <strong>endpoint devices downstream of Atlas 3 switch</strong>.
			                            Bridges, switches, and the Atlas 3 itself are excluded to prevent system instability.
			                        </div>
			                    </div>
			                </div>

			                <!-- Device Selection -->
			                <div class="config-item">
			                    <label for="linkQualityDeviceSelect">Target Device</label>
			                    <select id="linkQualityDeviceSelect" class="form-control">
			                        <option value="">All Atlas 3 Downstream Endpoints</option>
			                    </select>
			                    <span class="config-help">Select specific endpoint device to test, or test all downstream devices</span>
			                </div>

			                <!-- Filter Options -->
			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="linkQualityFilterEndpoints" checked disabled>
			                        Filter Endpoints Only (Required)
			                    </label>
			                    <span class="config-help">Automatically excludes bridges and switches - cannot be disabled for safety</span>
			                </div>

			                <!-- Show Excluded Devices -->
			                <div id="linkQualityExcludedDevices" style="display: none; margin-top: 10px; padding: 10px; background: #fef3c7; border-radius: 6px; border-left: 4px solid #f59e0b;">
			                    <div style="font-size: 13px; font-weight: 600; color: #92400e; margin-bottom: 5px;">
			                        ‚ö†Ô∏è Excluded Devices
			                    </div>
			                    <div id="linkQualityExcludedList" style="font-size: 12px; color: #78350f;"></div>
			                </div>

			                <div class="config-grid">
			                    <div class="config-item">
			                        <label for="link_quality_duration">Test Duration (minutes):</label>
			                        <input type="number" id="link_quality_duration" value="5" min="1" max="30">
			                    </div>
			                    <div class="config-item">
			                        <label for="link_quality_reset_freq">Reset Frequency (seconds):</label>
			                        <input type="number" id="link_quality_reset_freq" value="30" min="10" max="300">
			                    </div>
			                    <div class="config-item">
			                        <label for="link_quality_target_device">Target Device:</label>
			                        <select id="link_quality_target_device">
			                            <option value="">Auto-discover</option>
			                        </select>
			                    </div>
			                    <div class="config-item">
			                        <label>
			                            <input type="checkbox" id="link_quality_enable_resets" checked>
			                            Enable Random Resets
			                        </label>
			                    </div>
			                    <div class="config-item">
			                        <label>
			                            <input type="checkbox" id="link_quality_monitor_errors" checked>
			                            Monitor Atlas 3 Errors
			                        </label>
			                    </div>
			                </div>
			            </div>
			        </div>
			    </div>

			    <!-- ========================================
			         NVME VALIDATION CATEGORY
			         ======================================== -->

			    <div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="nvme_namespace_validation" data-category="nvme-validation" data-placeholder="true">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">üì¶</div>
			                <span>Namespace Validation</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="placeholder-badge">Coming Soon</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Validates NVMe namespace configuration, capacity allocation, and formatting compliance against NVMe specification requirements.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Namespace identification and attributes</li>
			                    <li>Logical block addressing (LBA) format</li>
			                    <li>Namespace capacity and utilization</li>
			                    <li>Format compliance (sector size, metadata)</li>
			                    <li>Multiple namespace support</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Test Options</h5>

			                <div class="config-item">
			                    <label for="nvmeNamespaceSelect">Target Namespace</label>
			                    <select id="nvmeNamespaceSelect" class="form-control">
			                        <option value="all">All Namespaces</option>
			                    </select>
			                    <span class="config-help">Select namespace to validate</span>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeValidateFormat">
			                        Validate Format Compliance
			                    </label>
			                    <span class="config-help">Check LBA format and metadata configuration</span>
			                </div>
			            </div>
			        </div>
			    </div>

			    <div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="nvme_command_set_validation" data-category="nvme-validation" data-placeholder="true">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">‚öôÔ∏è</div>
			                <span>Command Set Validation</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="placeholder-badge">Coming Soon</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Tests NVMe administrative and I/O command set compliance, proper response handling, and error conditions per NVMe specification.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Admin command set compliance</li>
			                    <li>I/O command execution</li>
			                    <li>Command status and completion</li>
			                    <li>Error injection and handling</li>
			                    <li>Queue management operations</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Test Options</h5>

			                <div class="config-item">
			                    <label for="nvmeCommandTestMode">Test Mode</label>
			                    <select id="nvmeCommandTestMode" class="form-control">
			                        <option value="basic">Basic Commands Only</option>
			                        <option value="extended">Extended Command Set</option>
			                        <option value="comprehensive">Comprehensive (All Commands)</option>
			                    </select>
			                    <span class="config-help">Select command test coverage level</span>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeTestErrorConditions">
			                        Test Error Conditions
			                    </label>
			                    <span class="config-help">Include error injection and recovery testing</span>
			                </div>
			            </div>
			        </div>
			    </div>

			    <div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="nvme_identify_validation" data-category="nvme-validation" data-placeholder="true">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">üÜî</div>
			                <span>Identify Structure Validation</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="placeholder-badge">Coming Soon</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Verifies NVMe Identify Controller and Namespace structures for spec compliance, checking field values and mandatory features.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Identify Controller data structure</li>
			                    <li>Identify Namespace data structure</li>
			                    <li>Mandatory capability bits</li>
			                    <li>Feature support flags</li>
			                    <li>Vendor-specific identification</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Test Options</h5>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeIdentifyVerbose">
			                        Verbose Output
			                    </label>
			                    <span class="config-help">Show all identify structure fields and values</span>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeIdentifyCheckVendor">
			                        Validate Vendor Fields
			                    </label>
			                    <span class="config-help">Include vendor-specific field validation</span>
			                </div>
			            </div>
			        </div>
			    </div>

			    <!-- ========================================
			         NVME PERFORMANCE CATEGORY
			         ======================================== -->

			    <div class="card test-card test-card-compact sequential-read-performance" data-test-id="nvme_sequential_read" data-category="nvme-performance">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">üìà</div>
			                <span>Sequential Read Performance</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="test-status-badge" id="seqReadStatus">Ready</span>
			                <button class="btn-icon" title="Expand/Collapse" onclick="toggleTestCard(this)">
			                    <span class="expand-icon">‚ñº</span>
			                </button>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Measures sequential read throughput and latency using fio with PCIe 6.x compliance validation and real-time performance monitoring.
			            </p>

			            <!-- Test Configuration -->
			            <div class="test-config-section">
			                <h5>Test Configuration</h5>

			                <!-- Device Filtering Info Box -->
			                <div class="info-box" style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 15px;">
			                    <div style="display: flex; align-items: start; gap: 10px;">
			                        <span style="font-size: 20px;">‚ÑπÔ∏è</span>
			                        <div style="font-size: 13px; color: #1e40af;">
			                            <strong>Device Filtering:</strong> This test automatically filters devices to only test <strong>endpoint devices downstream of Atlas 3 switch</strong>.
			                            Bridges, switches, and the Atlas 3 itself are excluded to prevent system instability.
			                        </div>
			                    </div>
			                </div>

			                <!-- Filter Options -->
			                <div class="config-group">
			                    <label>
			                        <input type="checkbox" id="seqReadFilterEndpoints" checked disabled>
			                        Filter Endpoints Only (Required)
			                    </label>
			                    <span class="config-help">Automatically excludes bridges and switches - cannot be disabled for safety</span>
			                </div>

			                <!-- Show Excluded Devices -->
			                <div id="seqReadExcludedDevices" style="display: none; margin-top: 10px; padding: 10px; background: #fef3c7; border-radius: 6px; border-left: 4px solid #f59e0b;">
			                    <div style="font-size: 13px; font-weight: 600; color: #92400e; margin-bottom: 5px;">
			                        ‚ö†Ô∏è Excluded Devices
			                    </div>
			                    <div id="seqReadExcludedList" style="font-size: 12px; color: #78350f;"></div>
			                </div>

			                <div class="config-grid">
			                    <div class="config-group">
			                        <label for="deviceSelect">Target Device:</label>
			                        <select id="deviceSelect" class="form-control">
			                            <option value="">Loading devices...</option>
			                        </select>
			                        <div id="selectedDeviceInfo" class="device-info" style="display: none;"></div>
			                    </div>
			                    <div class="config-group">
			                        <label for="runtimeSeconds">Test Duration:</label>
			                        <select id="runtimeSeconds" class="form-control">
			                            <option value="30">30 seconds</option>
			                            <option value="60" selected>60 seconds</option>
			                            <option value="120">120 seconds</option>
			                            <option value="300">300 seconds</option>
			                            <option value="600">600 seconds</option>
			                            <option value="custom">Custom...</option>
			                        </select>
			                        <input type="number" id="customRuntime" class="form-control" placeholder="Enter seconds (10-3600)" min="10" max="3600" style="display: none; margin-top: 5px;">
			                    </div>
			                    <div class="config-group">
			                        <label for="blockSize">Block Size:</label>
			                        <select id="blockSize" class="form-control">
			                            <option value="64k">64k</option>
			                            <option value="128k" selected>128k</option>
			                            <option value="256k">256k</option>
			                            <option value="512k">512k</option>
			                            <option value="1M">1M</option>
			                        </select>
			                    </div>
			                    <div class="config-group">
			                        <label for="queueDepth">Queue Depth:</label>
			                        <select id="queueDepth" class="form-control">
			                            <option value="1">1</option>
			                            <option value="8">8</option>
			                            <option value="16">16</option>
			                            <option value="32" selected>32</option>
			                            <option value="64">64</option>
			                            <option value="128">128</option>
			                        </select>
			                    </div>
			                </div>
			                <div class="config-actions">
			                    <button id="refreshDevices" class="btn btn-outline">
			                        <span>üîÑ</span> Refresh Devices
			                    </button>
			                    <button id="startSequentialReadTest" class="btn btn-primary">
			                        <span>‚ñ∂Ô∏è</span> Start Test
			                    </button>
			                    <button id="stopSequentialReadTest" class="btn btn-secondary" disabled>
			                        <span>‚èπÔ∏è</span> Stop Test
			                    </button>
			                </div>
			            </div>

			            <!-- Status and Progress -->
			            <div id="testProgressSection" style="display: none;">
			                <h5>Test Progress</h5>
			                <div class="progress-container">
			                    <div class="progress-bar">
			                        <div id="testProgress" class="progress-fill" style="width: 0%"></div>
			                    </div>
			                    <div class="progress-info">
			                        <span id="progressText">Starting test...</span>
			                        <span id="elapsedTime">0s / 60s</span>
			                    </div>
			                </div>
			            </div>

			            <!-- Real-time Charts -->
			            <div id="realtimeChartsSection" style="display: none;">
			                <h5>Real-time Performance</h5>
			                <div class="charts-grid">
			                    <div class="chart-container">
			                        <canvas id="throughputChart"></canvas>
			                    </div>
			                    <div class="chart-container">
			                        <canvas id="latencyChart"></canvas>
			                    </div>
			                    <div class="chart-container">
			                        <canvas id="cpuChart"></canvas>
			                    </div>
			                </div>
			            </div>

			            <!-- Test Results -->
			            <div id="testResults" style="display: none;"></div>
			            <div id="performanceMetrics" style="display: none;"></div>
			            <div id="complianceResults" style="display: none;"></div>
			            <div id="currentTestConfig" style="display: none;"></div>

			            <!-- System Status -->
			            <div class="system-status">
			                <div id="fioStatus" class="status-item">
			                    <span>üîß</span> Checking fio availability...
			                </div>
			                <div id="testStatus" class="status-message" style="display: none;"></div>
			            </div>

			            <!-- Export Results -->
			            <div class="export-section" style="display: none;">
			                <h5>Export Results</h5>
			                <div class="export-actions">
			                    <button id="exportResults" class="btn btn-outline" disabled>
			                        <span>üìä</span> Export Results
			                    </button>
			                </div>
			            </div>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Sequential read throughput vs PCIe 6.x theoretical limits</li>
			                    <li>Latency distribution (average, 95th percentile, 99th percentile)</li>
			                    <li>PCIe bandwidth utilization efficiency</li>
			                    <li>CPU utilization during sustained load</li>
			                    <li>Real-time performance monitoring</li>
			                </ul>

			                <h5>Requirements:</h5>
			                <ul>
			                    <li>NVMe Discovery test completed successfully</li>
			                    <li>fio benchmarking tool installed</li>
			                    <li>Target NVMe device selected</li>
			                    <li>Sufficient system resources for testing</li>
			                </ul>
			            </div>
			        </div>
			    </div>

			    <div class="card test-card test-card-compact sequential-write-performance" data-test-id="nvme_sequential_write" data-category="nvme-performance">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">‚úçÔ∏è</div>
			                <span>Sequential Write Performance</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="test-status-badge" id="seqWriteStatus">Ready</span>
			                <button class="btn-icon" title="Expand/Collapse" onclick="toggleTestCard(this)">
			                    <span class="expand-icon">‚ñº</span>
			                </button>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Measures sequential write throughput and latency using fio with PCIe 6.x compliance validation and real-time performance monitoring.
			            </p>

			            <!-- Test Configuration -->
			            <div class="test-config-section test-config-write">
			                <h5>Test Configuration</h5>
			                
			                <!-- Device Filtering Info Box -->
			                <div class="info-box" style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 15px;">
			                    <div style="display: flex; align-items: start; gap: 10px;">
			                        <span style="font-size: 20px;">‚ÑπÔ∏è</span>
			                        <div style="font-size: 13px; color: #1e40af;">
			                            <strong>Device Filtering:</strong> This test automatically filters devices to only test <strong>endpoint devices downstream of Atlas 3 switch</strong>.
			                            Bridges, switches, and the Atlas 3 itself are excluded to prevent system instability.
			                        </div>
			                    </div>
			                </div>
			                
			                <div class="config-item">
			                    <label for="seqWriteDeviceSelect">Target Device</label>
			                    <select id="seqWriteDeviceSelect" class="form-control">
			                        <option value="">All Atlas 3 Downstream Endpoints</option>
			                    </select>
			                    <span class="config-help">Select specific endpoint device to test, or test all downstream devices</span>
			                </div>
			                
			                <!-- Filter Options -->
			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="seqWriteFilterEndpoints" checked disabled>
			                        Filter Endpoints Only (Required)
			                    </label>
			                    <span class="config-help">Automatically excludes bridges and switches - cannot be disabled for safety</span>
			                </div>
			                
			                <!-- Excluded Devices Display -->
			                <div id="seqWriteExcludedDevices" class="excluded-devices" style="display: none;">
			                    <label>Excluded Devices (Bridges/Switches)</label>
			                    <div class="excluded-list">
			                        <!-- Will be populated dynamically -->
			                    </div>
			                </div>
			                
			                <div class="config-grid">
			                    <div class="config-group">
			                        <label for="deviceSelectWrite">Target Device:</label>
			                        <select id="deviceSelectWrite" class="form-control">
			                            <option value="">Loading devices...</option>
			                        </select>
			                        <div id="selectedDeviceInfoWrite" class="device-info" style="display: none;"></div>
			                    </div>
			                    <div class="config-group">
			                        <label for="runtimeSecondsWrite">Test Duration:</label>
			                        <select id="runtimeSecondsWrite" class="form-control">
			                            <option value="30">30 seconds</option>
			                            <option value="60" selected>60 seconds</option>
			                            <option value="120">120 seconds</option>
			                            <option value="300">300 seconds</option>
			                            <option value="600">600 seconds</option>
			                            <option value="custom">Custom...</option>
			                        </select>
			                        <input type="number" id="customRuntimeWrite" class="form-control" placeholder="Enter seconds (10-3600)" min="10" max="3600" style="display: none; margin-top: 5px;">
			                    </div>
			                    <div class="config-group">
			                        <label for="blockSizeWrite">Block Size:</label>
			                        <select id="blockSizeWrite" class="form-control">
			                            <option value="64k">64k</option>
			                            <option value="128k" selected>128k</option>
			                            <option value="256k">256k</option>
			                            <option value="512k">512k</option>
			                            <option value="1M">1M</option>
			                        </select>
			                    </div>
			                    <div class="config-group">
			                        <label for="queueDepthWrite">Queue Depth:</label>
			                        <select id="queueDepthWrite" class="form-control">
			                            <option value="1">1</option>
			                            <option value="8">8</option>
			                            <option value="16">16</option>
			                            <option value="32" selected>32</option>
			                            <option value="64">64</option>
			                            <option value="128">128</option>
			                        </select>
			                    </div>
			                </div>
			                <div class="config-actions">
			                    <button id="refreshDevicesWrite" class="btn btn-outline">
			                        <span>üîÑ</span> Refresh Devices
			                    </button>
			                    <button id="startSequentialWriteTest" class="btn btn-primary">
			                        <span>‚ñ∂Ô∏è</span> Start Test
			                    </button>
			                    <button id="stopSequentialWriteTest" class="btn btn-secondary" disabled>
			                        <span>‚èπÔ∏è</span> Stop Test
			                    </button>
			                </div>
			            </div>

			            <!-- Status and Progress -->
			            <div id="testProgressSectionWrite" style="display: none;">
			                <h5>Test Progress</h5>
			                <div class="progress-container">
			                    <div class="progress-bar">
			                        <div id="testProgressWrite" class="progress-fill" style="width: 0%"></div>
			                    </div>
			                    <div class="progress-info">
			                        <span id="progressTextWrite">Starting test...</span>
			                        <span id="elapsedTimeWrite">0s / 60s</span>
			                    </div>
			                </div>
			            </div>

			            <!-- Real-time Charts -->
			            <div id="realtimeChartsSectionWrite" style="display: none;">
			                <h5>Real-time Write Performance</h5>
			                <div class="charts-grid">
			                    <div class="chart-container">
			                        <canvas id="throughputChartWrite"></canvas>
			                    </div>
			                    <div class="chart-container">
			                        <canvas id="latencyChartWrite"></canvas>
			                    </div>
			                    <div class="chart-container">
			                        <canvas id="cpuChartWrite"></canvas>
			                    </div>
			                </div>
			            </div>

			            <!-- Test Results -->
			            <div id="testResultsWrite" style="display: none;"></div>
			            <div id="performanceMetricsWrite" style="display: none;"></div>
			            <div id="complianceResultsWrite" style="display: none;"></div>
			            <div id="currentTestConfigWrite" style="display: none;"></div>

			            <!-- System Status -->
			            <div class="system-status">
			                <div id="fioStatusWrite" class="status-item">
			                    <span>üîß</span> Checking fio availability...
			                </div>
			                <div id="testStatusWrite" class="status-message" style="display: none;"></div>
			            </div>

			            <!-- Export Results -->
			            <div class="export-section" style="display: none;">
			                <h5>Export Results</h5>
			                <div class="export-actions">
			                    <button id="exportResultsWrite" class="btn btn-outline" disabled>
			                        <span>üìä</span> Export Results
			                    </button>
			                </div>
			            </div>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Sequential write throughput vs PCIe 6.x theoretical limits</li>
			                    <li>Write latency distribution (average, 95th percentile, 99th percentile)</li>
			                    <li>PCIe bandwidth utilization efficiency</li>
			                    <li>CPU utilization during sustained write load</li>
			                    <li>Real-time write performance monitoring</li>
			                </ul>

			                <h5>Requirements:</h5>
			                <ul>
			                    <li>NVMe Discovery test completed successfully</li>
			                    <li>fio benchmarking tool installed</li>
			                    <li>Target NVMe device selected</li>
			                    <li>Sufficient system resources for testing</li>
			                </ul>
			            </div>
			        </div>
			    </div>

			    <div class="card test-card test-card-compact random-iops-performance" data-test-id="nvme_random_iops" data-category="nvme-performance">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">üé≤</div>
			                <span>Random IOPS Testing</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="test-status-badge" id="randomIOPSStatus">Ready</span>
			                <button class="btn-icon" title="Expand/Collapse" onclick="toggleTestCard(this)">
			                    <span class="expand-icon">‚ñº</span>
			                </button>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Tests random read/write IOPS performance at various queue depths and block sizes with PCIe 6.x compliance validation and real-time monitoring.
			            </p>

			            <!-- Test Configuration -->
			            <div class="test-config-section test-config-iops">
			                <h5>Test Configuration</h5>
			                
			                <!-- Device Filtering Info Box -->
			                <div class="info-box" style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 15px;">
			                    <div style="display: flex; align-items: start; gap: 10px;">
			                        <span style="font-size: 20px;">‚ÑπÔ∏è</span>
			                        <div style="font-size: 13px; color: #1e40af;">
			                            <strong>Device Filtering:</strong> This test automatically filters devices to only test <strong>endpoint devices downstream of Atlas 3 switch</strong>.
			                            Bridges, switches, and the Atlas 3 itself are excluded to prevent system instability.
			                        </div>
			                    </div>
			                </div>
			                
			                <div class="config-item">
			                    <label for="randomIOPSDeviceSelect">Target Device</label>
			                    <select id="randomIOPSDeviceSelect" class="form-control">
			                        <option value="">All Atlas 3 Downstream Endpoints</option>
			                    </select>
			                    <span class="config-help">Select specific endpoint device to test, or test all downstream devices</span>
			                </div>
			                
			                <!-- Filter Options -->
			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="randomIOPSFilterEndpoints" checked disabled>
			                        Filter Endpoints Only (Required)
			                    </label>
			                    <span class="config-help">Automatically excludes bridges and switches - cannot be disabled for safety</span>
			                </div>
			                
			                <!-- Excluded Devices Display -->
			                <div id="randomIOPSExcludedDevices" class="excluded-devices" style="display: none;">
			                    <label>Excluded Devices (Bridges/Switches)</label>
			                    <div class="excluded-list">
			                        <!-- Will be populated dynamically -->
			                    </div>
			                </div>
			                
			                <div class="config-grid">
			                    <div class="config-group">
			                        <label for="deviceSelectIOPS">Target Device:</label>
			                        <select id="deviceSelectIOPS" class="form-control">
			                            <option value="">Loading devices...</option>
			                        </select>
			                        <div id="selectedDeviceInfoIOPS" class="device-info" style="display: none;"></div>
			                    </div>
			                    <div class="config-group">
			                        <label for="runtimeSecondsIOPS">Test Duration:</label>
			                        <select id="runtimeSecondsIOPS" class="form-control">
			                            <option value="30">30 seconds</option>
			                            <option value="60" selected>60 seconds</option>
			                            <option value="120">120 seconds</option>
			                            <option value="300">300 seconds</option>
			                            <option value="600">600 seconds</option>
			                            <option value="custom">Custom...</option>
			                        </select>
			                        <input type="number" id="customRuntimeIOPS" class="form-control" placeholder="Enter seconds (10-3600)" min="10" max="3600" style="display: none; margin-top: 5px;">
			                    </div>
			                    <div class="config-group">
			                        <label for="workloadTypeIOPS">Workload Type:</label>
			                        <select id="workloadTypeIOPS" class="form-control">
			                            <option value="randread">Random Read</option>
			                            <option value="randwrite">Random Write</option>
			                            <option value="randrw" selected>Mixed Read/Write</option>
			                        </select>
			                    </div>
			                    <div class="config-group">
			                        <label for="blockSizeIOPS">Block Size:</label>
			                        <select id="blockSizeIOPS" class="form-control">
			                            <option value="4k" selected>4k</option>
			                            <option value="8k">8k</option>
			                            <option value="16k">16k</option>
			                            <option value="32k">32k</option>
			                        </select>
			                    </div>
			                    <div class="config-group">
			                        <label for="queueDepthIOPS">Queue Depth:</label>
			                        <select id="queueDepthIOPS" class="form-control">
			                            <option value="1">1</option>
			                            <option value="8">8</option>
			                            <option value="16">16</option>
			                            <option value="32">32</option>
			                            <option value="64" selected>64</option>
			                            <option value="128">128</option>
			                        </select>
			                    </div>
			                    <div class="config-group" id="readWriteRatioSection" style="display: block;">
			                        <label for="readRatio">Read Ratio (%):</label>
			                        <select id="readRatio" class="form-control">
			                            <option value="100">100% Read</option>
			                            <option value="70" selected>70% Read / 30% Write</option>
			                            <option value="50">50% Read / 50% Write</option>
			                            <option value="30">30% Read / 70% Write</option>
			                            <option value="0">100% Write</option>
			                        </select>
			                    </div>
			                </div>
			                <div class="config-actions">
			                    <button id="refreshDevicesIOPS" class="btn btn-outline">
			                        <span>üîÑ</span> Refresh Devices
			                    </button>
			                    <button id="startRandomIOPSTest" class="btn btn-primary">
			                        <span>‚ñ∂Ô∏è</span> Start Test
			                    </button>
			                    <button id="stopRandomIOPSTest" class="btn btn-secondary" disabled>
			                        <span>‚èπÔ∏è</span> Stop Test
			                    </button>
			                </div>
			            </div>

			            <!-- Status and Progress -->
			            <div id="testProgressSectionIOPS" style="display: none;">
			                <h5>Test Progress</h5>
			                <div class="progress-container">
			                    <div class="progress-bar">
			                        <div id="testProgressIOPS" class="progress-fill" style="width: 0%"></div>
			                    </div>
			                    <div class="progress-info">
			                        <span id="progressTextIOPS">Starting test...</span>
			                        <span id="elapsedTimeIOPS">0s / 60s</span>
			                    </div>
			                </div>
			            </div>

			            <!-- Real-time Charts -->
			            <div id="realtimeChartsSectionIOPS" style="display: none;">
			                <h5>Real-time IOPS Performance</h5>
			                <div class="charts-grid">
			                    <div class="chart-container">
			                        <canvas id="iopsChart"></canvas>
			                    </div>
			                    <div class="chart-container">
			                        <canvas id="latencyChartIOPS"></canvas>
			                    </div>
			                    <div class="chart-container">
			                        <canvas id="cpuChartIOPS"></canvas>
			                    </div>
			                </div>
			            </div>

			            <!-- Test Results -->
			            <div id="testResultsIOPS" style="display: none;"></div>
			            <div id="performanceMetricsIOPS" style="display: none;"></div>
			            <div id="complianceResultsIOPS" style="display: none;"></div>
			            <div id="currentTestConfigIOPS" style="display: none;"></div>

			            <!-- System Status -->
			            <div class="system-status">
			                <div id="fioStatusIOPS" class="status-item">
			                    <span>üîß</span> Checking fio availability...
			                </div>
			                <div id="testStatusIOPS" class="status-message" style="display: none;"></div>
			            </div>

			            <!-- Export Results -->
			            <div class="export-section" style="display: none;">
			                <h5>Export Results</h5>
			                <div class="export-actions">
			                    <button id="exportResultsIOPS" class="btn btn-outline" disabled>
			                        <span>üìä</span> Export Results
			                    </button>
			                </div>
			            </div>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Random IOPS performance vs PCIe 6.x theoretical limits</li>
			                    <li>Random read/write/mixed workload performance</li>
			                    <li>Queue depth scaling characteristics</li>
			                    <li>Latency distribution (average, 95th percentile, 99th percentile)</li>
			                    <li>CPU utilization during random I/O load</li>
			                    <li>Real-time IOPS monitoring</li>
			                </ul>

			                <h5>Requirements:</h5>
			                <ul>
			                    <li>NVMe Discovery test completed successfully</li>
			                    <li>fio benchmarking tool installed</li>
			                    <li>Target NVMe device selected</li>
			                    <li>Sufficient system resources for testing</li>
			                </ul>
			            </div>
			        </div>
			    </div>

			    <!-- ========================================
			         NVME HEALTH & SMART CATEGORY
			         ======================================== -->

			    <div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="nvme_smart_analysis" data-category="nvme-health" data-placeholder="true">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">ü©∫</div>
			                <span>SMART Health Analysis</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="placeholder-badge">Coming Soon</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Comprehensive SMART data analysis including temperature monitoring, wear leveling, and endurance metrics for drive health assessment.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Critical warning status</li>
			                    <li>Temperature sensors and thresholds</li>
			                    <li>Available spare capacity</li>
			                    <li>Percentage used indicator</li>
			                    <li>Media and data integrity errors</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Test Options</h5>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeSmartContinuous" checked>
			                        Continuous Monitoring
			                    </label>
			                    <span class="config-help">Monitor SMART attributes continuously during test</span>
			                </div>

			                <div class="config-item">
			                    <label for="nvmeSmartInterval">Update Interval (seconds)</label>
			                    <input type="number" id="nvmeSmartInterval" class="form-control" value="5" min="1" max="60">
			                    <span class="config-help">How often to update SMART data</span>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeSmartAlerts">
			                        Enable Threshold Alerts
			                    </label>
			                    <span class="config-help">Alert on critical threshold violations</span>
			                </div>
			            </div>
			        </div>
			    </div>

			    <div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="nvme_temperature_monitoring" data-category="nvme-health" data-placeholder="true">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">üå°Ô∏è</div>
			                <span>Temperature Monitoring</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="placeholder-badge">Coming Soon</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Real-time temperature tracking with thermal throttling detection and thermal management assessment across all sensors.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Composite temperature reading</li>
			                    <li>Individual sensor temperatures</li>
			                    <li>Thermal throttling detection</li>
			                    <li>Over/under temperature warnings</li>
			                    <li>Temperature trends over time</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Test Options</h5>

			                <div class="config-item">
			                    <label for="nvmeTempDuration">Monitoring Duration (minutes)</label>
			                    <input type="number" id="nvmeTempDuration" class="form-control" value="10" min="1" max="120">
			                    <span class="config-help">How long to monitor temperatures</span>
			                </div>

			                <div class="config-item">
			                    <label for="nvmeTempThreshold">Alert Threshold (¬∞C)</label>
			                    <input type="number" id="nvmeTempThreshold" class="form-control" value="70" min="40" max="100">
			                    <span class="config-help">Temperature threshold for alerts</span>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeTempStressTest">
			                        Run Under Load
			                    </label>
			                    <span class="config-help">Monitor temperature during I/O stress test</span>
			                </div>
			            </div>
			        </div>
			    </div>

			    <div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="nvme_endurance_tracking" data-category="nvme-health" data-placeholder="true">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">‚è≥</div>
			                <span>Endurance & Wear Tracking</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="placeholder-badge">Coming Soon</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Monitors percentage used, data units written, and remaining endurance for drive lifecycle management and prediction.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Percentage used indicator</li>
			                    <li>Data units written counter</li>
			                    <li>Data units read counter</li>
			                    <li>Remaining endurance estimate</li>
			                    <li>Write amplification tracking</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Test Options</h5>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeEnduranceBaseline" checked>
			                        Capture Baseline
			                    </label>
			                    <span class="config-help">Record current endurance metrics as baseline</span>
			                </div>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="nvmeEnduranceProjection">
			                        Project Remaining Life
			                    </label>
			                    <span class="config-help">Calculate estimated remaining drive life based on usage patterns</span>
			                </div>

			                <div class="config-item">
			                    <label for="nvmeEnduranceReportFormat">Report Format</label>
			                    <select id="nvmeEnduranceReportFormat" class="form-control">
			                        <option value="summary">Summary</option>
			                        <option value="detailed" selected>Detailed</option>
			                        <option value="trend">Trend Analysis</option>
			                    </select>
			                    <span class="config-help">Level of detail in endurance report</span>
			                </div>
			            </div>
			        </div>
			    </div>

			    <!-- ========================================
			         PCIE COMPLIANCE CATEGORY
			         ======================================== -->

			    <div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="pcie_link_width_test" data-category="pcie-compliance" data-placeholder="true">
			        <div class="card-header test-card-header">
			            <div class="card-title">
			                <div class="card-icon">üìè</div>
			                <span>Link Width Validation</span>
			            </div>
			            <div class="test-card-header-actions">
			                <span class="placeholder-badge">Coming Soon</span>
			            </div>
			        </div>
			        <div class="test-card-body">
			            <p class="test-description">
			                Validates negotiated link width against device capabilities and configuration, ensuring optimal lane utilization.
			            </p>

			            <div class="test-requirements">
			                <h5>Test Validates:</h5>
			                <ul>
			                    <li>Negotiated vs. maximum link width</li>
			                    <li>Lane reversal detection</li>
			                    <li>Asymmetric link configurations</li>
			                    <li>Width downgrade causes</li>
			                    <li>Multi-function device width allocation</li>
			                </ul>
			            </div>

			            <div class="test-config-section">
			                <h5>Test Options</h5>

			                <div class="config-item">
			                    <label>
			                        <input type="checkbox" id="pcieLinkWidthStress">
			                        Stress Test Link
			                    </label>
			                    <span class="config-help">Test width stability under bandwidth stress</span>
			                </div>

			                <div class="config-item">
			                    <label>JMContinue <input type="checkbox" id="pcieLinkWidthRetrain">
			                        Test Width Retrain
			                    </label>
			                    <span class="config-help">Trigger link retrain and verify width restoration</span>
			                </div>
			            </div>
			        </div>
			    </div><div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="pcie_link_speed_test" data-category="pcie-compliance" data-placeholder="true">
			    <div class="card-header test-card-header">
			        <div class="card-title">
			            <div class="card-icon">‚ö°</div>
			            <span>Link Speed Compliance</span>
			        </div>
			        <div class="test-card-header-actions">
			            <span class="placeholder-badge">Coming Soon</span>
			        </div>
			    </div>
			    <div class="test-card-body">
			        <p class="test-description">
			            Verifies PCIe generation and speed compliance from Gen1 through Gen6 operation, validating speed negotiation.
			        </p>        <div class="test-requirements">
			            <h5>Test Validates:</h5>
			            <ul>
			                <li>Current vs. maximum link speed</li>
			                <li>Speed negotiation sequence</li>
			                <li>Gen3+ equalization</li>
			                <li>Speed downgrade detection</li>
			                <li>Per-lane speed verification</li>
			            </ul>
			        </div>        <div class="test-config-section">
			            <h5>Test Options</h5>            <div class="config-item">
			                <label for="pcieLinkSpeedTarget">Target Speed</label>
			                <select id="pcieLinkSpeedTarget" class="form-control">
			                    <option value="max" selected>Maximum Supported</option>
			                    <option value="gen6">Gen6 (64 GT/s)</option>
			                    <option value="gen5">Gen5 (32 GT/s)</option>
			                    <option value="gen4">Gen4 (16 GT/s)</option>
			                    <option value="gen3">Gen3 (8 GT/s)</option>
			                </select>
			                <span class="config-help">Target link speed for validation</span>
			            </div>            <div class="config-item">
			                <label>
			                    <input type="checkbox" id="pcieLinkSpeedCycle">
			                    Test Speed Cycling
			                </label>
			                <span class="config-help">Test transitions between different link speeds</span>
			            </div>
			        </div>
			    </div>
			</div><div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="pcie_power_management" data-category="pcie-compliance" data-placeholder="true">
			    <div class="card-header test-card-header">
			        <div class="card-title">
			            <div class="card-icon">üîã</div>
			            <span>Power Management Validation</span>
			        </div>
			        <div class="test-card-header-actions">
			            <span class="placeholder-badge">Coming Soon</span>
			        </div>
			    </div>
			    <div class="test-card-body">
			        <p class="test-description">
			            Tests PCIe power state transitions (L0, L1, L2, L3) and ASPM (Active State Power Management) functionality.
			        </p>        <div class="test-requirements">
			            <h5>Test Validates:</h5>
			            <ul>
			                <li>L0/L0s/L1/L2/L3 state transitions</li>
			                <li>ASPM L1 entry/exit latency</li>
			                <li>Clock power management</li>
			                <li>Link power state recovery</li>
			                <li>PME (Power Management Event) generation</li>
			            </ul>
			        </div>        <div class="test-config-section">
			            <h5>Test Options</h5>            <div class="config-item">
			                <label for="pciePowerStates">Power States to Test</label>
			                <select id="pciePowerStates" class="form-control" multiple size="3">
			                    <option value="l0s">L0s (Link Standby)</option>
			                    <option value="l1" selected>L1 (Link Power Down)</option>
			                    <option value="l2">L2 (Link Off)</option>
			                </select>
			                <span class="config-help">Select power states to validate</span>
			            </div>            <div class="config-item">
			                <label>
			                    <input type="checkbox" id="pciePowerASPM" checked>
			                    Test ASPM Transitions
			                </label>
			                <span class="config-help">Validate Active State Power Management</span>
			            </div>            <div class="config-item">
			                <label for="pciePowerCycles">Number of Cycles</label>
			                <input type="number" id="pciePowerCycles" class="form-control" value="100" min="10" max="1000">
			                <span class="config-help">Number of power state transitions to test</span>
			            </div>
			        </div>
			    </div>
			</div><!-- ========================================
			     PCIE 6.X-SPECIFIC TESTS CATEGORY
			     ======================================== --><div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="pcie6_flit_mode_test" data-category="pcie-6x" data-placeholder="true">
			    <div class="card-header test-card-header">
			        <div class="card-title">
			            <div class="card-icon">üî∑</div>
			            <span>FLIT Mode Operation</span>
			        </div>
			        <div class="test-card-header-actions">
			            <span class="placeholder-badge">Coming Soon</span>
			        </div>
			    </div>
			    <div class="test-card-body">
			        <p class="test-description">
			            Validates PCIe 6.0 FLIT (Flow Control Unit) mode operation and packet framing with 242-byte FLIT structure.
			        </p>        <div class="test-requirements">
			            <h5>Test Validates:</h5>
			            <ul>
			                <li>FLIT mode negotiation</li>
			                <li>242-byte FLIT structure</li>
			                <li>CRC and FEC operation</li>
			                <li>FLIT packet framing</li>
			                <li>Retry buffer management</li>
			            </ul>
			        </div>        <div class="test-config-section">
			            <h5>Test Options</h5>            <div class="config-item">
			                <label>
			                    <input type="checkbox" id="pcie6FlitFECTest" checked>
			                    Test FEC Operation
			                </label>
			                <span class="config-help">Validate Forward Error Correction in FLIT mode</span>
			            </div>            <div class="config-item">
			                <label>
			                    <input type="checkbox" id="pcie6FlitErrorInject">
			                    Error Injection Testing
			                </label>
			                <span class="config-help">Inject errors to test FLIT recovery mechanisms</span>
			            </div>            <div class="config-item">
			                <label for="pcie6FlitDuration">Test Duration (seconds)</label>
			                <input type="number" id="pcie6FlitDuration" class="form-control" value="60" min="10" max="600">
			                <span class="config-help">Duration to monitor FLIT mode operation</span>
			            </div>
			        </div>
			    </div>
			</div><div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="pcie6_pam4_signaling" data-category="pcie-6x" data-placeholder="true">
			    <div class="card-header test-card-header">
			        <div class="card-title">
			            <div class="card-icon">üì°</div>
			            <span>PAM4 Signaling Test</span>
			        </div>
			        <div class="test-card-header-actions">
			            <span class="placeholder-badge">Coming Soon</span>
			        </div>
			    </div>
			    <div class="test-card-body">
			        <p class="test-description">
			            Tests PAM4 (4-level Pulse Amplitude Modulation) signaling characteristics and error rates for Gen6 64 GT/s operation.
			        </p>        <div class="test-requirements">
			            <h5>Test Validates:</h5>
			            <ul>
			                <li>PAM4 signal integrity</li>
			                <li>Symbol error rate (SER)</li>
			                <li>Eye diagram characteristics</li>
			                <li>Transmitter output levels</li>
			                <li>Receiver sensitivity</li>
			            </ul>
			        </div>        <div class="test-config-section">
			            <h5>Test Options</h5>            <div class="config-item">
			                <label for="pcie6PAM4TestMode">Test Mode</label>
			                <select id="pcie6PAM4TestMode" class="form-control">
			                    <option value="normal" selected>Normal Operation</option>
			                    <option value="ber">Bit Error Rate (BER) Test</option>
			                    <option value="compliance">Compliance Pattern</option>
			                    <option value="prbs">PRBS Pattern</option>
			                </select>
			                <span class="config-help">PAM4 test pattern/mode</span>
			            </div>            <div class="config-item">
			                <label for="pcie6PAM4Duration">Measurement Duration (minutes)</label>
			                <input type="number" id="pcie6PAM4Duration" class="form-control" value="5" min="1" max="60">
			                <span class="config-help">Duration for PAM4 signal measurement</span>
			            </div>            <div class="config-item">
			                <label>
			                    <input type="checkbox" id="pcie6PAM4PerLane">
			                    Per-Lane Analysis
			                </label>
			                <span class="config-help">Analyze each lane individually</span>
			            </div>
			        </div>
			    </div>
			</div><div class="card test-card test-card-compact test-card-placeholder collapsed" data-test-id="pcie6_lane_margining" data-category="pcie-6x" data-placeholder="true">
			    <div class="card-header test-card-header">
			        <div class="card-title">
			            <div class="card-icon">üìê</div>
			            <span>Lane Margining Analysis</span>
			        </div>
			        <div class="test-card-header-actions">
			            <span class="placeholder-badge">Coming Soon</span>
			        </div>
			    </div>
			    <div class="test-card-body">
			        <p class="test-description">
			            Performs PCIe 6.0 lane margining to assess signal integrity margins and link robustness at operating conditions.
			        </p>        <div class="test-requirements">
			            <h5>Test Validates:</h5>
			            <ul>
			                <li>Timing margin (UI)</li>
			                <li>Voltage margin (mV)</li>
			                <li>Eye height and width</li>
			                <li>Per-lane margin analysis</li>
			                <li>Margin at operational speed</li>
			            </ul>
			        </div>        <div class="test-config-section">
			            <h5>Test Options</h5>            <div class="config-item">
			                <label for="pcie6MarginType">Margining Type</label>
			                <select id="pcie6MarginType" class="form-control">
			                    <option value="both" selected>Timing & Voltage</option>
			                    <option value="timing">Timing Only</option>
			                    <option value="voltage">Voltage Only</option>
			                </select>
			                <span class="config-help">Type of margining to perform</span>
			            </div>            <div class="config-item">
			                <label for="pcie6MarginLanes">Lanes to Test</label>
			                <select id="pcie6MarginLanes" class="form-control">
			                    <option value="all" selected>All Lanes</option>
			                    <option value="worst">Worst Case Lane</option>
			                    <option value="random">Random Sample</option>
			                </select>
			                <span class="config-help">Which lanes to include in margining test</span>
			            </div>            <div class="config-item">
			                <label for="pcie6MarginSteps">Margin Steps</label>
			                <input type="number" id="pcie6MarginSteps" class="form-control" value="32" min="16" max="64">
			                <span class="config-help">Number of margin steps per direction</span>
			            </div>            <div class="config-item">
			                <label>
			                    <input type="checkbox" id="pcie6MarginHeatmap">
			                    Generate Heatmap
			                </label>
			                <span class="config-help">Create visual margin heatmap for analysis</span>
			            </div>
			        </div>
			    </div>
			</div>
			</div>

			    <!-- ‚úÖ Command Interface STAYS (unchanged) -->
			    <div class="command-interface">
			        <div class="console-header">
			            <h3>Test Console</h3>
			            <div class="console-actions">
			                <button class="btn btn-sm btn-outline" onclick="document.getElementById('testConsole').innerHTML = ''">
			                    Clear Console
			                </button>
			            </div>
			        </div>
			        <div id="testConsole" class="console-output">
			            <div class="console-entry info">
			                <span class="console-timestamp">[Ready]</span>
			                <span class="console-content">Test console initialized. Run tests to see output here.</span>
			            </div>
			        </div>
			    </div>
			</div>

            <!-- Analytics Dashboard -->
            <div id="analytics-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">System Analytics</h2>
                    <p class="dashboard-subtitle">Command history, performance metrics, and system analytics</p>
                </div>

                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="totalCommands">0</div>
                        <div class="metric-label">Total Commands</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="successfulCommands">0</div>
                        <div class="metric-label">Successful</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="errorCommands">0</div>
                        <div class="metric-label">Errors</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="avgResponseTime">0ms</div>
                        <div class="metric-label">Avg Response</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìä</div>
                                Command Performance
                            </div>
                            <button class="btn btn-sm btn-outline" id="clearAnalytics">
                                <span>üóëÔ∏è</span> Clear History
                            </button>
                        </div>

                        <canvas id="performanceChart" width="400" height="200"></canvas>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üìã</div>
                                Command History
                            </div>
                        </div>

                        <div class="command-history" id="commandHistory">
                            <div class="history-entry">
                                <div class="history-timestamp">System Start</div>
                                <div class="history-command">Analytics tracking initialized</div>
                                <div class="history-status success">System</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                        <!-- Terminal Dashboard -->
            <div id="terminal-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <h2 class="dashboard-title">Terminal Emulator</h2>
                            <p class="dashboard-subtitle">Direct CLI interface for device communication</p>
                        </div>
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <div class="terminal-connection-indicator" id="terminalConnectionStatus">
                                <div class="terminal-connection-dot"></div>
                                <span>Disconnected</span>
                            </div>
                            <button class="btn btn-outline" id="exportTerminal">
                                <span>üìÑ</span> Export Session
                            </button>
                            <button class="btn btn-outline" id="clearTerminal">
                                <span>üóëÔ∏è</span> Clear
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Terminal Statistics -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-value" id="terminalCommandsCount">0</div>
                        <div class="metric-label">Commands Executed</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="terminalBufferSize">0</div>
                        <div class="metric-label">Buffer Lines</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="terminalResponseTime">--ms</div>
                        <div class="metric-label">Last Response Time</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="terminalConnectionPort">--</div>
                        <div class="metric-label">Active Port</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Terminal Emulator Card -->
                    <div class="card" style="grid-column: span 2;">
                        <div class="terminal-container">
                            <!-- Terminal Header -->
                            <div class="terminal-header">
                                <div class="terminal-title">
                                    <span>‚å®Ô∏è</span>
                                    <span>CalypsoPy+ Terminal</span>
                                </div>
                                <div class="terminal-window-controls">
                                    <div class="terminal-control-dot close"></div>
                                    <div class="terminal-control-dot minimize"></div>
                                    <div class="terminal-control-dot maximize"></div>
                                </div>
                            </div>

                            <!-- Terminal Display Area -->
                            <div class="terminal-display" id="terminalDisplay">
                                <!-- Terminal lines will be dynamically added here -->
                            </div>

                            <!-- Terminal Input Area -->
                            <div class="terminal-input-container">
                                <span class="terminal-prompt-label" id="terminalPromptLabel">></span>
                                <input
                                    type="text"
                                    id="terminalInput"
                                    class="terminal-input"
                                    placeholder="Enter command..."
                                    autocomplete="off"
                                    spellcheck="false"
                                    disabled
                                >
                                <div class="terminal-controls">
                                    <button class="terminal-btn primary" id="sendTerminalCmd" disabled>
                                        <span>üì§</span>
                                        <span>Send</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Terminal Statistics Bar -->
                            <div class="terminal-stats-bar">
                                <div class="terminal-stat-item">
                                    <span class="terminal-stat-label">Port:</span>
                                    <span class="terminal-stat-value" id="terminalStatPort">--</span>
                                </div>
                                <div class="terminal-stat-item">
                                    <span class="terminal-stat-label">Baud:</span>
                                    <span class="terminal-stat-value">115200</span>
                                </div>
                                <div class="terminal-stat-item">
                                    <span class="terminal-stat-label">History:</span>
                                    <span class="terminal-stat-value" id="terminalStatHistory">0</span>
                                </div>
                                <div class="terminal-stat-item">
                                    <span class="terminal-stat-label">Buffer:</span>
                                    <span class="terminal-stat-value" id="terminalStatBuffer">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Keyboard Shortcuts Card -->
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">‚å®Ô∏è</div>
                                Keyboard Shortcuts
                            </div>
                        </div>

                        <div class="terminal-shortcuts-help">
                            <div class="shortcuts-title">Quick Reference Guide</div>
                            <div class="shortcuts-list">
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Enter</span>
                                    <span class="shortcut-description">Execute command</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">‚Üë / ‚Üì</span>
                                    <span class="shortcut-description">Navigate command history</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl + L</span>
                                    <span class="shortcut-description">Clear terminal screen</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Ctrl + C</span>
                                    <span class="shortcut-description">Cancel current input</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Esc</span>
                                    <span class="shortcut-description">Clear input field</span>
                                </div>
                                <div class="shortcut-item">
                                    <span class="shortcut-key">Tab</span>
                                    <span class="shortcut-description">Auto-complete (future)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Terminal Usage Tips Card -->
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon">üí°</div>
                                Terminal Usage Tips
                            </div>
                        </div>

                        <div style="padding: 10px 0;">
                            <div style="background: var(--light-gray); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <h4 style="color: var(--primary-red); margin-bottom: 10px; font-size: 14px;">
                                    üéØ Getting Started
                                </h4>
                                <ul style="color: var(--secondary-gray); font-size: 13px; line-height: 1.8; margin-left: 20px;">
                                    <li>Connect to your device first before using the terminal</li>
                                    <li>Type commands directly and press Enter to execute</li>
                                    <li>All commands are sent in real-time to the connected device</li>
                                    <li>Response times are displayed after each command execution</li>
                                </ul>
                            </div>

                            <div style="background: var(--light-gray); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <h4 style="color: var(--primary-red); margin-bottom: 10px; font-size: 14px;">
                                    ‚ö° Power Features
                                </h4>
                                <ul style="color: var(--secondary-gray); font-size: 13px; line-height: 1.8; margin-left: 20px;">
                                    <li><strong>Command History:</strong> Use up/down arrows to recall previous commands</li>
                                    <li><strong>Auto-scroll:</strong> Terminal automatically scrolls to show latest output</li>
                                    <li><strong>Export Session:</strong> Save complete terminal session to text file</li>
                                    <li><strong>Buffer Management:</strong> Automatic buffer trimming keeps performance optimal</li>
                                </ul>
                            </div>

                            <div style="background: rgba(251, 191, 36, 0.1); border: 2px solid rgba(251, 191, 36, 0.3); padding: 15px; border-radius: 10px;">
                                <h4 style="color: #d97706; margin-bottom: 10px; font-size: 14px;">
                                    ‚ö†Ô∏è Important Notes
                                </h4>
                                <ul style="color: var(--secondary-gray); font-size: 13px; line-height: 1.8; margin-left: 20px;">
                                    <li>Commands are executed immediately - there is no undo function</li>
                                    <li>Terminal operates in real-time mode with no caching</li>
                                    <li>Long-running commands may take time to complete</li>
                                    <li>Connection must remain active during command execution</li>
                                    <li>Maximum buffer size: 1000 lines (auto-trimmed)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User's Manual Dashboard -->
            <div id="user-manual-dashboard" class="dashboard" style="display: none;">
                <div class="dashboard-header">
                    <h2>üìö User's Manual</h2>
                    <div class="manual-search-container">
                        <input type="text" id="manual-search" placeholder="Search manual..." class="manual-search-input">
                        <button id="clear-search" class="manual-clear-btn">‚úï</button>
                    </div>
                </div>
                
                <div class="manual-container">
                    <!-- Table of Contents Sidebar -->
                    <div class="manual-toc">
                        <h3>Table of Contents</h3>
                        <ul class="toc-list">
                            <li><a href="#getting-started" class="toc-link">Getting Started</a></li>
                            <li><a href="#connection-setup" class="toc-link">Connection Setup</a></li>
                            <li><a href="#device-information" class="toc-link">Device Information</a></li>
                            <li><a href="#link-status" class="toc-link">Link Status</a></li>
                            <li><a href="#bifurcation" class="toc-link">Bifurcation</a></li>
                            <li><a href="#registers" class="toc-link">Registers</a></li>
                            <li><a href="#firmware-updates" class="toc-link">Firmware Updates</a></li>
                            <li><a href="#testing-suite" class="toc-link">Testing Suite</a></li>
                            <li><a href="#analytics" class="toc-link">Analytics</a></li>
                            <li><a href="#terminal" class="toc-link">Terminal</a></li>
                            <li><a href="#troubleshooting" class="toc-link">Troubleshooting</a></li>
                            <li><a href="#advanced-features" class="toc-link">Advanced Features</a></li>
                        </ul>
                    </div>
                    
                    <!-- Manual Content -->
                    <div class="manual-content">
                        <!-- Getting Started Section -->
                        <section id="getting-started" class="manual-section">
                            <h2>Getting Started</h2>
                            <div class="section-content">
                                <h3>Welcome to CalypsoPy+</h3>
                                <p>CalypsoPy+ is a professional PCIe hardware development interface designed for working with Serial Cables Gen6 PCIe Atlas 3 Host Cards. This comprehensive platform provides real-time hardware monitoring, firmware updates, and extensive testing capabilities through an intuitive web interface.</p>
                                
                                <h4>Quick Start Checklist</h4>
                                <ul>
                                    <li>‚úÖ Ensure your Atlas 3 Host Card is properly connected</li>
                                    <li>‚úÖ Verify serial cable connection (115200-8-N-1)</li>
                                    <li>‚úÖ Launch CalypsoPy+ server</li>
                                    <li>‚úÖ Open web interface at http://localhost:5000</li>
                                    <li>‚úÖ Establish connection via Connection dashboard</li>
                                </ul>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Main Dashboard Overview</p>
                                    <em>This will show the main CalypsoPy+ interface with all dashboard options visible</em>
                                </div>
                                
                                <h4>System Requirements</h4>
                                <div class="info-box">
                                    <strong>Minimum Requirements:</strong>
                                    <ul>
                                        <li>Python 3.8+</li>
                                        <li>Flask 3.0.0</li>
                                        <li>Modern web browser (Chrome, Firefox, Safari, Edge)</li>
                                        <li>Serial port access</li>
                                    </ul>
                                    
                                    <strong>Enhanced Features:</strong>
                                    <ul>
                                        <li>Root/Administrator privileges (for PCIe testing)</li>
                                        <li>pciutils, nvme-cli, fio (for comprehensive testing)</li>
                                        <li>matplotlib, reportlab (for advanced reporting)</li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <!-- Connection Setup Section -->
                        <section id="connection-setup" class="manual-section">
                            <h2>Connection Setup</h2>
                            <div class="section-content">
                                <h3>Establishing Device Connection</h3>
                                <p>The Connection dashboard is your gateway to communicating with Atlas 3 Host Cards. Proper connection setup is essential for all other operations.</p>
                                
                                <h4>Connection Parameters</h4>
                                <table class="manual-table">
                                    <tr><th>Parameter</th><th>Value</th><th>Description</th></tr>
                                    <tr><td>Baud Rate</td><td>115200</td><td>Serial communication speed</td></tr>
                                    <tr><td>Data Bits</td><td>8</td><td>Character size</td></tr>
                                    <tr><td>Parity</td><td>None</td><td>Error checking method</td></tr>
                                    <tr><td>Stop Bits</td><td>1</td><td>End of character marker</td></tr>
                                    <tr><td>Timeout</td><td>2 seconds</td><td>Command response timeout</td></tr>
                                </table>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Connection Dashboard</p>
                                    <em>Show the connection interface with port selection and connection status</em>
                                </div>
                                
                                <h4>Connection Status Indicators</h4>
                                <ul>
                                    <li><span class="status-indicator connected">üü¢</span> <strong>Connected:</strong> Active communication established</li>
                                    <li><span class="status-indicator disconnected">üî¥</span> <strong>Disconnected:</strong> No communication available</li>
                                    <li><span class="status-indicator connecting">üü°</span> <strong>Connecting:</strong> Attempting to establish connection</li>
                                </ul>
                                
                                <div class="warning-box">
                                    <strong>‚ö†Ô∏è Important:</strong> Always ensure proper grounding and verify device compatibility before connecting. Incorrect connections may damage hardware.
                                </div>
                            </div>
                        </section>

                        <!-- Device Information Section -->
                        <section id="device-information" class="manual-section">
                            <h2>Device Information</h2>
                            <div class="section-content">
                                <h3>Hardware Overview Dashboard</h3>
                                <p>The Device Information dashboard provides comprehensive details about your connected Atlas 3 Host Card, including hardware specifications, firmware versions, and operational status.</p>
                                
                                <h4>Information Categories</h4>
                                <div class="expandable-section">
                                    <h5>üìã System Information</h5>
                                    <ul>
                                        <li><strong>Device Model:</strong> Atlas 3 Host Card identification</li>
                                        <li><strong>Serial Number:</strong> Unique device identifier</li>
                                        <li><strong>Hardware Revision:</strong> Board version information</li>
                                        <li><strong>Manufacturing Date:</strong> Production timestamp</li>
                                    </ul>
                                </div>
                                
                                <div class="expandable-section">
                                    <h5>üîß Firmware Information</h5>
                                    <ul>
                                        <li><strong>MCU Firmware:</strong> Microcontroller firmware version</li>
                                        <li><strong>SBR0/SBR1:</strong> Switch board firmware versions</li>
                                        <li><strong>Boot Loader:</strong> System boot loader version</li>
                                        <li><strong>Update Status:</strong> Last firmware update information</li>
                                    </ul>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Device Information Panel</p>
                                    <em>Display the complete device information dashboard with all hardware details</em>
                                </div>
                                
                                <h4>Refresh and Caching</h4>
                                <p>Device information is cached for performance but can be refreshed manually. The system automatically updates critical status information every 30 seconds.</p>
                            </div>
                        </section>

                        <!-- Link Status Section -->
                        <section id="link-status" class="manual-section">
                            <h2>Link Status</h2>
                            <div class="section-content">
                                <h3>PCIe Link Monitoring</h3>
                                <p>The Link Status dashboard provides real-time monitoring of PCIe port states, link training status, and connection health across all Atlas 3 switch ports.</p>
                                
                                <h4>Port Status Indicators</h4>
                                <table class="manual-table">
                                    <tr><th>Status</th><th>Indicator</th><th>Description</th></tr>
                                    <tr><td>Link Up</td><td>üü¢</td><td>Port is active and trained</td></tr>
                                    <tr><td>Link Down</td><td>üî¥</td><td>No device detected or link failed</td></tr>
                                    <tr><td>Training</td><td>üü°</td><td>Link training in progress</td></tr>
                                    <tr><td>Disabled</td><td>‚ö´</td><td>Port administratively disabled</td></tr>
                                </table>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Link Status Overview</p>
                                    <em>Show the link status grid with multiple ports and their current states</em>
                                </div>
                                
                                <h4>Link Details</h4>
                                <p>Click any port to view detailed information:</p>
                                <ul>
                                    <li><strong>Link Speed:</strong> Current negotiated speed (Gen1/2/3/4/5)</li>
                                    <li><strong>Link Width:</strong> Number of active lanes (x1, x2, x4, x8, x16)</li>
                                    <li><strong>Training Time:</strong> Time taken for link establishment</li>
                                    <li><strong>Error Counters:</strong> Link-level error statistics</li>
                                    <li><strong>Device Info:</strong> Connected endpoint information</li>
                                </ul>
                                
                                <div class="tip-box">
                                    <strong>üí° Pro Tip:</strong> Use the auto-refresh feature during debugging to monitor link state changes in real-time. The dashboard updates every 5 seconds when enabled.
                                </div>
                            </div>
                        </section>

                        <!-- Bifurcation Section -->
                        <section id="bifurcation" class="manual-section">
                            <h2>Bifurcation</h2>
                            <div class="section-content">
                                <h3>Port Configuration Management</h3>
                                <p>The Bifurcation dashboard allows you to configure how PCIe ports are divided and allocated across the Atlas 3 switch, enabling flexible topology management.</p>
                                
                                <h4>Bifurcation Modes</h4>
                                <div class="mode-grid">
                                    <div class="mode-card">
                                        <h5>x16 Mode</h5>
                                        <p>Single x16 port - Maximum bandwidth for single device</p>
                                        <ul>
                                            <li>1 √ó x16 port</li>
                                            <li>Maximum bandwidth: 32 GB/s (PCIe 5.0)</li>
                                            <li>Ideal for: High-performance NVMe, GPUs</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="mode-card">
                                        <h5>x8x8 Mode</h5>
                                        <p>Two x8 ports - Balanced configuration</p>
                                        <ul>
                                            <li>2 √ó x8 ports</li>
                                            <li>Bandwidth per port: 16 GB/s</li>
                                            <li>Ideal for: Dual NVMe, balanced workloads</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="mode-card">
                                        <h5>x4x4x4x4 Mode</h5>
                                        <p>Four x4 ports - Maximum device count</p>
                                        <ul>
                                            <li>4 √ó x4 ports</li>
                                            <li>Bandwidth per port: 8 GB/s</li>
                                            <li>Ideal for: Multiple NVMe drives, mixed devices</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Bifurcation Configuration</p>
                                    <em>Show the bifurcation mode selection interface with visual port layout</em>
                                </div>
                                
                                <h4>Configuration Process</h4>
                                <ol>
                                    <li><strong>Select Mode:</strong> Choose desired bifurcation configuration</li>
                                    <li><strong>Validate:</strong> System checks compatibility with connected devices</li>
                                    <li><strong>Apply:</strong> Configuration is written to switch registers</li>
                                    <li><strong>Reset:</strong> System may require reset for changes to take effect</li>
                                    <li><strong>Verify:</strong> Confirm new configuration is active</li>
                                </ol>
                                
                                <div class="warning-box">
                                    <strong>‚ö†Ô∏è Caution:</strong> Bifurcation changes may require system reset and will temporarily disconnect all devices. Save your work before proceeding.
                                </div>
                            </div>
                        </section>

                        <!-- Registers Section -->
                        <section id="registers" class="manual-section">
                            <h2>Registers</h2>
                            <div class="section-content">
                                <h3>Memory and Register Access</h3>
                                <p>The Registers dashboard provides direct access to Atlas 3 switch memory and configuration registers for advanced debugging and configuration.</p>
                                
                                <h4>Operation Types</h4>
                                <div class="operation-grid">
                                    <div class="operation-card">
                                        <h5>Memory Read (MR)</h5>
                                        <p>Read single memory location</p>
                                        <code>mr &lt;address&gt;</code>
                                        <p>Returns 32-bit value at specified address</p>
                                    </div>
                                    
                                    <div class="operation-card">
                                        <h5>Memory Write (MW)</h5>
                                        <p>Write to single memory location</p>
                                        <code>mw &lt;address&gt; &lt;value&gt;</code>
                                        <p>Writes 32-bit value to specified address</p>
                                    </div>
                                    
                                    <div class="operation-card">
                                        <h5>Dump Range (DR)</h5>
                                        <p>Read range of memory locations</p>
                                        <code>dr &lt;start&gt; &lt;end&gt;</code>
                                        <p>Returns formatted memory dump</p>
                                    </div>
                                    
                                    <div class="operation-card">
                                        <h5>Dump Pattern (DP)</h5>
                                        <p>Advanced memory analysis</p>
                                        <code>dp &lt;address&gt; &lt;pattern&gt;</code>
                                        <p>Pattern-based memory operations</p>
                                    </div>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Register Interface</p>
                                    <em>Show the register read/write interface with command input and results display</em>
                                </div>
                                
                                <h4>Safety Features</h4>
                                <ul>
                                    <li><strong>Read-Only Regions:</strong> Critical system areas are protected</li>
                                    <li><strong>Validation:</strong> Address ranges are validated before access</li>
                                    <li><strong>Backup:</strong> Configuration snapshots before major changes</li>
                                    <li><strong>Rollback:</strong> Ability to restore previous configurations</li>
                                </ul>
                                
                                <div class="danger-box">
                                    <strong>‚ö†Ô∏è Warning:</strong> Direct register access can affect system stability. Only modify registers if you understand their function. Always backup configurations before making changes.
                                </div>
                            </div>
                        </section>

                        <!-- Firmware Updates Section -->
                        <section id="firmware-updates" class="manual-section">
                            <h2>Firmware Updates</h2>
                            <div class="section-content">
                                <h3>XMODEM-Based Firmware Management</h3>
                                <p>The Firmware Updates dashboard provides secure, reliable firmware updating capabilities using the XMODEM protocol for Atlas 3 Host Cards.</p>
                                
                                <h4>Update Targets</h4>
                                <div class="target-grid">
                                    <div class="target-card">
                                        <h5>MCU (Microcontroller)</h5>
                                        <ul>
                                            <li>Primary system control firmware</li>
                                            <li>Manages basic device operations</li>
                                            <li>Recommended for feature updates</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="target-card">
                                        <h5>SBR0 (Switch Board 0)</h5>
                                        <ul>
                                            <li>Primary PCIe switch firmware</li>
                                            <li>Controls port configuration</li>
                                            <li>Critical for link management</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="target-card">
                                        <h5>SBR1 (Switch Board 1)</h5>
                                        <ul>
                                            <li>Secondary switch functionality</li>
                                            <li>Advanced features and extensions</li>
                                            <li>Optional for most configurations</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Firmware Update Interface</p>
                                    <em>Show the firmware update dashboard with file selection and progress indicators</em>
                                </div>
                                
                                <h4>Update Process</h4>
                                <ol>
                                    <li><strong>Pre-Update Check:</strong> Verify current firmware versions</li>
                                    <li><strong>File Selection:</strong> Choose appropriate firmware file (.bin format)</li>
                                    <li><strong>Target Selection:</strong> Select MCU, SBR0, or SBR1</li>
                                    <li><strong>Validation:</strong> Firmware compatibility verification</li>
                                    <li><strong>Transfer:</strong> XMODEM-based secure file transfer</li>
                                    <li><strong>Programming:</strong> Firmware written to target device</li>
                                    <li><strong>Verification:</strong> Checksum and integrity validation</li>
                                    <li><strong>Reboot:</strong> System restart to activate new firmware</li>
                                </ol>
                                
                                <div class="progress-indicators">
                                    <h5>Progress Monitoring</h5>
                                    <ul>
                                        <li>üìä <strong>Transfer Progress:</strong> Real-time upload percentage</li>
                                        <li>‚ö° <strong>Speed Monitor:</strong> Transfer rate display</li>
                                        <li>‚è±Ô∏è <strong>Time Remaining:</strong> Estimated completion time</li>
                                        <li>‚úÖ <strong>Block Verification:</strong> Individual packet confirmation</li>
                                    </ul>
                                </div>
                                
                                <div class="critical-box">
                                    <strong>üö® Critical:</strong> Never interrupt firmware updates or disconnect devices during the process. Power loss or interruption can permanently damage the device requiring factory recovery.
                                </div>
                            </div>
                        </section>

                        <!-- Testing Suite Section -->
                        <section id="testing-suite" class="manual-section">
                            <h2>Testing Suite</h2>
                            <div class="section-content">
                                <h3>Comprehensive PCIe Testing Framework</h3>
                                <p>The Testing Suite provides automated testing capabilities for Atlas 3 Host Cards and connected devices, focusing on performance validation and system stability.</p>
                                
                                <h4>Available Tests</h4>
                                <div class="test-grid">
                                    <div class="test-card">
                                        <h5>üîç PCIe Discovery</h5>
                                        <p>Comprehensive topology scanning</p>
                                        <ul>
                                            <li>Atlas 3 switch enumeration</li>
                                            <li>Downstream device discovery</li>
                                            <li>Link capability assessment</li>
                                            <li>Device filtering (Atlas 3 endpoints only)</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="test-card">
                                        <h5>üíæ NVMe Discovery</h5>
                                        <p>NVMe device enumeration and analysis</p>
                                        <ul>
                                            <li>NVMe namespace detection</li>
                                            <li>Drive capacity and health</li>
                                            <li>Performance characteristics</li>
                                            <li>SMART data retrieval</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="test-card">
                                        <h5>‚ö° Link Training Time</h5>
                                        <p>LTSSM state transition measurement</p>
                                        <ul>
                                            <li>Training duration analysis</li>
                                            <li>Speed negotiation timing</li>
                                            <li>Multiple measurement averaging</li>
                                            <li>Statistical analysis</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="test-card">
                                        <h5>üîÑ Link Retrain Count</h5>
                                        <p>Link stability monitoring</p>
                                        <ul>
                                            <li>Retrain event counting</li>
                                            <li>Stability assessment</li>
                                            <li>Error rate calculation</li>
                                            <li>Long-term monitoring</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="test-card">
                                        <h5>üìñ Sequential Read Performance</h5>
                                        <p>Sequential read throughput testing</p>
                                        <ul>
                                            <li>Variable block size testing</li>
                                            <li>Queue depth optimization</li>
                                            <li>Sustained performance measurement</li>
                                            <li>Thermal throttling detection</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="test-card">
                                        <h5>üìù Sequential Write Performance</h5>
                                        <p>Sequential write throughput testing</p>
                                        <ul>
                                            <li>Write endurance consideration</li>
                                            <li>Cache behavior analysis</li>
                                            <li>Sustained vs burst performance</li>
                                            <li>Write amplification monitoring</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="test-card">
                                        <h5>üéØ Random IOPS Performance</h5>
                                        <p>Random I/O operations testing</p>
                                        <ul>
                                            <li>4K random read/write IOPS</li>
                                            <li>Mixed workload simulation</li>
                                            <li>Latency distribution analysis</li>
                                            <li>QoS performance validation</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="test-card">
                                        <h5>üé≠ Link Quality Assessment</h5>
                                        <p>Signal integrity and link quality</p>
                                        <ul>
                                            <li>Error rate measurement</li>
                                            <li>Signal quality metrics</li>
                                            <li>Jitter and noise analysis</li>
                                            <li>Eye diagram assessment</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Testing Dashboard</p>
                                    <em>Show the test selection interface with available tests and progress indicators</em>
                                </div>
                                
                                <h4>Test Execution</h4>
                                <ol>
                                    <li><strong>Device Selection:</strong> Choose target devices (auto-filtered to Atlas 3 endpoints)</li>
                                    <li><strong>Test Configuration:</strong> Set parameters for selected tests</li>
                                    <li><strong>Pre-test Validation:</strong> Verify device readiness and capabilities</li>
                                    <li><strong>Execution:</strong> Run tests with real-time progress monitoring</li>
                                    <li><strong>Results Collection:</strong> Gather and analyze test data</li>
                                    <li><strong>Report Generation:</strong> Create comprehensive test reports</li>
                                </ol>
                                
                                <div class="safety-box">
                                    <strong>üõ°Ô∏è Safety Features:</strong>
                                    <ul>
                                        <li><strong>Device Filtering:</strong> Only Atlas 3 downstream endpoints are tested</li>
                                        <li><strong>Non-Destructive:</strong> All tests preserve existing data</li>
                                        <li><strong>Thermal Monitoring:</strong> Automatic test suspension on overheating</li>
                                        <li><strong>Error Handling:</strong> Graceful recovery from test failures</li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <!-- Analytics Section -->
                        <section id="analytics" class="manual-section">
                            <h2>Analytics</h2>
                            <div class="section-content">
                                <h3>Performance Data Analysis</h3>
                                <p>The Analytics dashboard provides comprehensive visualization and analysis of test results, system performance, and historical data trends.</p>
                                
                                <h4>Visualization Types</h4>
                                <div class="viz-grid">
                                    <div class="viz-card">
                                        <h5>üìà Performance Charts</h5>
                                        <ul>
                                            <li>Real-time performance graphs</li>
                                            <li>Historical trend analysis</li>
                                            <li>Comparative benchmarking</li>
                                            <li>Interactive data exploration</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="viz-card">
                                        <h5>üìä Statistical Reports</h5>
                                        <ul>
                                            <li>Performance statistics summary</li>
                                            <li>Percentile analysis</li>
                                            <li>Standard deviation calculations</li>
                                            <li>Confidence intervals</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="viz-card">
                                        <h5>üó∫Ô∏è Topology Visualization</h5>
                                        <ul>
                                            <li>PCIe tree representation</li>
                                            <li>Device hierarchy mapping</li>
                                            <li>Link status visualization</li>
                                            <li>Interactive topology explorer</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="viz-card">
                                        <h5>üìã Export Options</h5>
                                        <ul>
                                            <li>PDF report generation</li>
                                            <li>CSV data export</li>
                                            <li>JSON structured data</li>
                                            <li>PNG/SVG chart export</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Analytics Dashboard</p>
                                    <em>Show performance charts, topology visualization, and export options</em>
                                </div>
                                
                                <h4>Key Metrics</h4>
                                <table class="manual-table">
                                    <tr><th>Metric</th><th>Unit</th><th>Description</th></tr>
                                    <tr><td>Throughput</td><td>GB/s</td><td>Data transfer rate</td></tr>
                                    <tr><td>IOPS</td><td>Operations/sec</td><td>Input/Output operations per second</td></tr>
                                    <tr><td>Latency</td><td>Œºs</td><td>Response time for operations</td></tr>
                                    <tr><td>Link Training Time</td><td>ms</td><td>Time to establish PCIe link</td></tr>
                                    <tr><td>Error Rate</td><td>%</td><td>Percentage of failed operations</td></tr>
                                    <tr><td>Retrain Count</td><td>Events</td><td>Number of link retraining events</td></tr>
                                </table>
                            </div>
                        </section>

                        <!-- Terminal Section -->
                        <section id="terminal" class="manual-section">
                            <h2>Terminal</h2>
                            <div class="section-content">
                                <h3>Direct Command Interface</h3>
                                <p>The Terminal dashboard provides direct command-line access to the Atlas 3 Host Card, enabling advanced users to execute custom commands and scripts.</p>
                                
                                <h4>Terminal Features</h4>
                                <ul>
                                    <li><strong>Real-time Communication:</strong> Direct serial interface with no caching</li>
                                    <li><strong>Command History:</strong> Navigate previous commands with arrow keys</li>
                                    <li><strong>Auto-completion:</strong> Tab completion for common commands</li>
                                    <li><strong>Buffer Management:</strong> 1000-line scrollback buffer with auto-trimming</li>
                                    <li><strong>Copy/Paste:</strong> Full clipboard integration</li>
                                </ul>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Terminal Interface</p>
                                    <em>Show the terminal with command input, output display, and control buttons</em>
                                </div>
                                
                                <h4>Common Commands</h4>
                                <table class="manual-table">
                                    <tr><th>Command</th><th>Description</th><th>Example</th></tr>
                                    <tr><td>help</td><td>Display available commands</td><td>help</td></tr>
                                    <tr><td>showport</td><td>Display port status</td><td>showport all</td></tr>
                                    <tr><td>showmode</td><td>Current bifurcation mode</td><td>showmode</td></tr>
                                    <tr><td>getconfig</td><td>Device configuration</td><td>getconfig</td></tr>
                                    <tr><td>mr</td><td>Memory read</td><td>mr 0x1000</td></tr>
                                    <tr><td>mw</td><td>Memory write</td><td>mw 0x1000 0xFF</td></tr>
                                    <tr><td>reset</td><td>System reset</td><td>reset</td></tr>
                                </table>
                                
                                <div class="tip-box">
                                    <strong>üí° Pro Tips:</strong>
                                    <ul>
                                        <li>Use <code>Ctrl+L</code> to clear the terminal</li>
                                        <li>Press <code>Tab</code> for command auto-completion</li>
                                        <li>Use <code>‚Üë</code>/<code>‚Üì</code> arrows for command history</li>
                                        <li>Type <code>help</code> for comprehensive command reference</li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <!-- Troubleshooting Section -->
                        <section id="troubleshooting" class="manual-section">
                            <h2>Troubleshooting</h2>
                            <div class="section-content">
                                <h3>Common Issues and Solutions</h3>
                                
                                <div class="troubleshoot-section">
                                    <h4>üîå Connection Issues</h4>
                                    
                                    <div class="issue-card">
                                        <h5>Device Not Detected</h5>
                                        <p><strong>Symptoms:</strong> No serial ports available or connection fails</p>
                                        <p><strong>Solutions:</strong></p>
                                        <ul>
                                            <li>Verify physical cable connections</li>
                                            <li>Check device power status</li>
                                            <li>Ensure correct serial port drivers are installed</li>
                                            <li>Try different USB ports or cables</li>
                                            <li>Restart device and CalypsoPy+ application</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="issue-card">
                                        <h5>Connection Timeout</h5>
                                        <p><strong>Symptoms:</strong> Connection attempts fail after 2 seconds</p>
                                        <p><strong>Solutions:</strong></p>
                                        <ul>
                                            <li>Verify baud rate settings (115200)</li>
                                            <li>Check for cable compatibility issues</li>
                                            <li>Test with different terminal software first</li>
                                            <li>Ensure device is not connected elsewhere</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="troubleshoot-section">
                                    <h4>üß™ Testing Problems</h4>
                                    
                                    <div class="issue-card">
                                        <h5>No Devices Found for Testing</h5>
                                        <p><strong>Symptoms:</strong> Tests report "No compatible devices found"</p>
                                        <p><strong>Solutions:</strong></p>
                                        <ul>
                                            <li>Ensure Atlas 3 devices are connected and powered</li>
                                            <li>Run PCIe Discovery test first</li>
                                            <li>Verify devices are downstream endpoints of Atlas 3</li>
                                            <li>Check device filtering settings</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="issue-card">
                                        <h5>Test Failures or Inconsistent Results</h5>
                                        <p><strong>Symptoms:</strong> Tests fail unexpectedly or show varying results</p>
                                        <p><strong>Solutions:</strong></p>
                                        <ul>
                                            <li>Ensure system has adequate cooling</li>
                                            <li>Check for background system activity</li>
                                            <li>Verify adequate power supply</li>
                                            <li>Run tests multiple times for consistency</li>
                                            <li>Monitor system logs for error messages</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="troubleshoot-section">
                                    <h4>üîß Firmware Update Issues</h4>
                                    
                                    <div class="issue-card">
                                        <h5>Update Stalled or Failed</h5>
                                        <p><strong>Symptoms:</strong> Firmware update stops progressing or fails</p>
                                        <p><strong>Solutions:</strong></p>
                                        <ul>
                                            <li><strong>Never power cycle during update!</strong></li>
                                            <li>Wait for timeout and retry operation</li>
                                            <li>Ensure stable power supply</li>
                                            <li>Check file integrity and compatibility</li>
                                            <li>Contact support if device becomes unresponsive</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="troubleshoot-section">
                                    <h4>üñ•Ô∏è Web Interface Issues</h4>
                                    
                                    <div class="issue-card">
                                        <h5>Dashboards Not Loading</h5>
                                        <p><strong>Symptoms:</strong> Blank dashboards or JavaScript errors</p>
                                        <p><strong>Solutions:</strong></p>
                                        <ul>
                                            <li>Clear browser cache and cookies</li>
                                            <li>Try different web browser</li>
                                            <li>Check browser console for error messages</li>
                                            <li>Ensure JavaScript is enabled</li>
                                            <li>Restart CalypsoPy+ server</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="issue-card">
                                        <h5>Real-time Updates Not Working</h5>
                                        <p><strong>Symptoms:</strong> Data doesn't update automatically</p>
                                        <p><strong>Solutions:</strong></p>
                                        <ul>
                                            <li>Check network connectivity</li>
                                            <li>Verify WebSocket connection in browser dev tools</li>
                                            <li>Disable browser extensions that might block WebSockets</li>
                                            <li>Try refreshing the page</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Troubleshooting Tools</p>
                                    <em>Show diagnostic information panel and connection status indicators</em>
                                </div>
                                
                                <div class="emergency-box">
                                    <h4>üö® Emergency Recovery</h4>
                                    <p>If your device becomes unresponsive after firmware update:</p>
                                    <ol>
                                        <li><strong>DO NOT power cycle</strong> - this may cause permanent damage</li>
                                        <li>Contact technical support immediately</li>
                                        <li>Provide firmware file and version information</li>
                                        <li>Document any error messages or symptoms</li>
                                    </ol>
                                </div>
                            </div>
                        </section>

                        <!-- Advanced Features Section -->
                        <section id="advanced-features" class="manual-section">
                            <h2>Advanced Features</h2>
                            <div class="section-content">
                                <h3>Power User Capabilities</h3>
                                
                                <div class="advanced-section">
                                    <h4>üì° API Integration</h4>
                                    <p>CalypsoPy+ provides WebSocket API for integration with external tools and automation systems.</p>
                                    
                                    <h5>WebSocket Events</h5>
                                    <table class="manual-table">
                                        <tr><th>Event</th><th>Description</th><th>Data Format</th></tr>
                                        <tr><td>device_connected</td><td>Device connection established</td><td>JSON status object</td></tr>
                                        <tr><td>test_progress</td><td>Test execution updates</td><td>Progress percentage</td></tr>
                                        <tr><td>test_complete</td><td>Test finished</td><td>Results object</td></tr>
                                        <tr><td>firmware_progress</td><td>Firmware update status</td><td>Transfer progress</td></tr>
                                    </table>
                                </div>
                                
                                <div class="advanced-section">
                                    <h4>üîß Custom Scripts</h4>
                                    <p>Execute custom testing sequences and automation scripts through the Terminal interface.</p>
                                    
                                    <h5>Script Examples</h5>
                                    <pre class="code-block">
# Automated link quality test
showport all
for port in 0 1 2 3:
    mr 0x1000 + (port * 0x100)
    # Check error counters
end

# Performance baseline collection
run_sequential_read_test --device nvme0 --duration 300
run_random_iops_test --device nvme0 --duration 300
export_results --format csv
                                    </pre>
                                </div>
                                
                                <div class="advanced-section">
                                    <h4>‚öôÔ∏è Configuration Management</h4>
                                    <p>Save and restore device configurations for different testing scenarios.</p>
                                    
                                    <h5>Configuration Options</h5>
                                    <ul>
                                        <li><strong>Bifurcation Profiles:</strong> Save preferred port configurations</li>
                                        <li><strong>Test Parameters:</strong> Store test settings for repeatability</li>
                                        <li><strong>Performance Baselines:</strong> Reference measurements for comparison</li>
                                        <li><strong>Device Profiles:</strong> Custom settings per device type</li>
                                    </ul>
                                </div>
                                
                                <div class="advanced-section">
                                    <h4>üìä Custom Reporting</h4>
                                    <p>Create specialized reports with custom metrics and visualizations.</p>
                                    
                                    <h5>Report Customization</h5>
                                    <ul>
                                        <li><strong>Metric Selection:</strong> Choose specific performance indicators</li>
                                        <li><strong>Time Range:</strong> Define analysis periods</li>
                                        <li><strong>Comparison Mode:</strong> Compare multiple test runs</li>
                                        <li><strong>Export Formats:</strong> PDF, Excel, CSV, JSON</li>
                                    </ul>
                                </div>
                                
                                <div class="screenshot-placeholder">
                                    <p>üì∑ Screenshot Placeholder: Advanced Features Interface</p>
                                    <em>Show configuration management and custom reporting interfaces</em>
                                </div>
                                
                                <div class="expert-box">
                                    <h4>üéì Expert Tips</h4>
                                    <ul>
                                        <li><strong>Batch Testing:</strong> Use scripting for overnight test campaigns</li>
                                        <li><strong>Thermal Management:</strong> Monitor device temperatures during extended testing</li>
                                        <li><strong>Data Correlation:</strong> Cross-reference test results with system logs</li>
                                        <li><strong>Version Control:</strong> Track firmware and configuration changes</li>
                                    </ul>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
                
                <!-- Manual JavaScript for Search and Navigation -->
                <script>
                document.addEventListener('DOMContentLoaded', function() {
                    // Search functionality
                    const searchInput = document.getElementById('manual-search');
                    const clearButton = document.getElementById('clear-search');
                    const sections = document.querySelectorAll('.manual-section');
                    const tocLinks = document.querySelectorAll('.toc-link');
                    
                    // Search function
                    function performSearch(query) {
                        const searchTerm = query.toLowerCase().trim();
                        
                        sections.forEach(section => {
                            const content = section.textContent.toLowerCase();
                            const isVisible = searchTerm === '' || content.includes(searchTerm);
                            section.style.display = isVisible ? 'block' : 'none';
                            
                            // Highlight search terms
                            if (searchTerm && isVisible) {
                                highlightSearchTerm(section, searchTerm);
                            } else {
                                removeHighlights(section);
                            }
                        });
                        
                        // Update TOC
                        updateTOC(searchTerm);
                    }
                    
                    // Highlight search terms
                    function highlightSearchTerm(element, term) {
                        removeHighlights(element);
                        const walker = document.createTreeWalker(
                            element,
                            NodeFilter.SHOW_TEXT,
                            null,
                            false
                        );
                        
                        const textNodes = [];
                        let node;
                        while (node = walker.nextNode()) {
                            textNodes.push(node);
                        }
                        
                        textNodes.forEach(textNode => {
                            const parent = textNode.parentNode;
                            if (parent.tagName !== 'SCRIPT' && parent.tagName !== 'STYLE') {
                                const text = textNode.textContent;
                                const regex = new RegExp(`(${term})`, 'gi');
                                if (regex.test(text)) {
                                    const highlighted = text.replace(regex, '<mark class="search-highlight">$1</mark>');
                                    const wrapper = document.createElement('span');
                                    wrapper.innerHTML = highlighted;
                                    parent.replaceChild(wrapper, textNode);
                                }
                            }
                        });
                    }
                    
                    // Remove highlights
                    function removeHighlights(element) {
                        const highlights = element.querySelectorAll('.search-highlight');
                        highlights.forEach(highlight => {
                            const parent = highlight.parentNode;
                            parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                            parent.normalize();
                        });
                    }
                    
                    // Update table of contents
                    function updateTOC(searchTerm) {
                        tocLinks.forEach(link => {
                            const targetId = link.getAttribute('href').substring(1);
                            const targetSection = document.getElementById(targetId);
                            const isVisible = targetSection && targetSection.style.display !== 'none';
                            link.parentElement.style.display = isVisible ? 'block' : 'none';
                        });
                    }
                    
                    // Search event listeners
                    searchInput.addEventListener('input', function() {
                        performSearch(this.value);
                    });
                    
                    clearButton.addEventListener('click', function() {
                        searchInput.value = '';
                        performSearch('');
                        searchInput.focus();
                    });
                    
                    // TOC navigation
                    tocLinks.forEach(link => {
                        link.addEventListener('click', function(e) {
                            e.preventDefault();
                            const targetId = this.getAttribute('href').substring(1);
                            const targetSection = document.getElementById(targetId);
                            if (targetSection) {
                                targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                // Highlight section briefly
                                targetSection.style.backgroundColor = '#e3f2fd';
                                setTimeout(() => {
                                    targetSection.style.backgroundColor = '';
                                }, 2000);
                            }
                        });
                    });
                    
                    // Expandable sections
                    const expandableSections = document.querySelectorAll('.expandable-section h5');
                    expandableSections.forEach(header => {
                        header.style.cursor = 'pointer';
                        header.addEventListener('click', function() {
                            const content = this.nextElementSibling;
                            if (content) {
                                const isExpanded = content.style.display !== 'none';
                                content.style.display = isExpanded ? 'none' : 'block';
                                this.textContent = (isExpanded ? '‚ñ∂ ' : '‚ñº ') + this.textContent.replace(/^[‚ñ∂‚ñº] /, '');
                            }
                        });
                        // Set initial state
                        header.textContent = '‚ñº ' + header.textContent;
                    });
                    
                    // Keyboard shortcuts
                    document.addEventListener('keydown', function(e) {
                        // Ctrl/Cmd + F to focus search
                        if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                            e.preventDefault();
                            searchInput.focus();
                        }
                        
                        // Escape to clear search
                        if (e.key === 'Escape' && searchInput === document.activeElement) {
                            searchInput.value = '';
                            performSearch('');
                        }
                    });
                });
                </script>
            </div>

        </main>
    </div>

    <!-- CalypsoPy+ Scripts -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/resets.js') }}"></script>
    <script src="{{ url_for('static', filename='js/errors.js') }}"></script>
    <!-- Terminal Module -->
    <script src="{{ url_for('static', filename='js/terminal.js') }}"></script>
    <!-- Advanced Module -->
    <script src="{{ url_for('static', filename='js/advanced.js') }}"></script>
    <!-- Device Filtering Utility Module -->
    <script src="{{ url_for('static', filename='js/device_filtering.js') }}"></script>
    <!-- Testing & Topology Visualization Modules -->
    <script src="{{ url_for('static', filename='js/testing.js') }}"></script>
    <script src="{{ url_for('static', filename='js/topology_visualizer.js') }}"></script>
    <!-- Firmware Updater Module -->
    <script src="{{ url_for('static', filename='js/FWUpdater.js') }}"></script>
    <!-- Sequential Read Performance Module -->
    <script src="{{ url_for('static', filename='js/sequential_read_performance.js') }}"></script>
    <!-- Sequential Write Performance Module -->
    <script src="{{ url_for('static', filename='js/sequential_write_performance.js') }}"></script>
    <!-- Random IOPS Performance Module -->
    <script src="{{ url_for('static', filename='js/random_iops_performance.js') }}"></script>

</body>
</html>